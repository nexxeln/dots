"use strict";var Ac=Object.create;var Fr=Object.defineProperty;var Ic=Object.getOwnPropertyDescriptor;var Uc=Object.getOwnPropertyNames;var Mc=Object.getPrototypeOf,qc=Object.prototype.hasOwnProperty;var Kt=(r,t)=>()=>(r&&(t=r(r=0)),t);var it=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),Wn=(r,t)=>{for(var n in t)Fr(r,n,{get:t[n],enumerable:!0})},vs=(r,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Uc(t))!qc.call(r,i)&&i!==n&&Fr(r,i,{get:()=>t[i],enumerable:!(s=Ic(t,i))||s.enumerable});return r};var re=(r,t,n)=>(n=r!=null?Ac(Mc(r)):{},vs(t||!r||!r.__esModule?Fr(n,"default",{value:r,enumerable:!0}):n,r)),Dc=r=>vs(Fr({},"__esModule",{value:!0}),r);var na=it(se=>{"use strict";var Js=se&&se.__awaiter||function(r,t,n,s){function i(c){return c instanceof n?c:new n(function(d){d(c)})}return new(n||(n=Promise))(function(c,d){function b(y){try{h(s.next(y))}catch(O){d(O)}}function p(y){try{h(s.throw(y))}catch(O){d(O)}}function h(y){y.done?c(y.value):i(y.value).then(b,p)}h((s=s.apply(r,t||[])).next())})};Object.defineProperty(se,"__esModule",{value:!0});se.HttpError=se.optimistic=se.okify=se.ok=se.SUCCESS_CODES=se.handle=void 0;function Xc(r,t){return Js(this,void 0,void 0,function*(){let{status:n,data:s,headers:i}=yield r,c=t[n];if(c)return c(s);if(t.default)return t.default(n,s);throw new Xt(n,s,i)})}se.handle=Xc;se.SUCCESS_CODES=[200,201,202,204];function Hs(r){return Js(this,void 0,void 0,function*(){let t=yield r;if(se.SUCCESS_CODES.some(n=>n==t.status))return t.data;throw new Xt(t.status,t.data,t.headers)})}se.ok=Hs;function Gs(r){return(...t)=>Hs(r(...t))}se.okify=Gs;function eu(r){let t={};return Object.entries(r).forEach(([n,s])=>{t[n]=typeof s=="function"?Gs(s):s}),t}se.optimistic=eu;var Xt=class extends Error{constructor(t,n,s){super(`Error: ${t}`),this.status=t,this.data=n,this.headers=s}};se.HttpError=Xt});var oa=it(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.joinUrl=fe.stripUndefined=fe.delimited=fe.encode=fe.allowReserved=fe.encodeReserved=void 0;fe.encodeReserved=[encodeURIComponent,encodeURIComponent];fe.allowReserved=[encodeURIComponent,encodeURI];function Xs(r,t=","){let n=(s,i)=>{let c=r[i%r.length];return typeof s>"u"?"":typeof s=="object"?Array.isArray(s)?s.map(c).join(t):Object.entries(s).reduce((b,p)=>[...b,...p],[]).map(c).join(t):c(String(s))};return(s,...i)=>s.reduce((c,d,b)=>`${c}${d}${n(i[b],b)}`,"")}fe.encode=Xs;function ou(r=","){return(t,n=fe.encodeReserved)=>Object.entries(t).filter(([,s])=>s!==void 0).map(([s,i])=>Xs(n,r)`${s}=${i}`).join("&")}fe.delimited=ou;function iu(r){return r&&JSON.parse(JSON.stringify(r))}fe.stripUndefined=iu;function cu(...r){return r.filter(Boolean).map((t,n)=>n===0?t:t.replace(/^\/+/,"")).map((t,n,s)=>n===s.length-1?t:t.replace(/\/+$/,"")).join("/")}fe.joinUrl=cu});var ia=it(ie=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});ie.space=ie.pipe=ie.form=ie.json=ie.explode=ie.deep=ie.query=void 0;var qe=oa();function uu(...r){let t=r.filter(Boolean).join("&");return t&&`?${t}`}ie.query=uu;function lu(r,[t,n]=qe.encodeReserved){let s=(0,qe.encode)([d=>d,t]),i=(0,qe.encode)([d=>d,n]),c=(d,b="")=>Object.entries(d).filter(([,p])=>p!==void 0).map(([p,h])=>{let y=Array.isArray(d)?"":p,O=b?s`${b}[${y}]`:p;return typeof h=="object"?c(h,O):i`${O}=${h}`}).join("&");return c(r)}ie.deep=lu;function eo(r,t=qe.encodeReserved){let n=(0,qe.encode)(t);return Object.entries(r).filter(([,s])=>s!==void 0).map(([s,i])=>Array.isArray(i)?i.map(c=>n`${s}=${c}`).join("&"):typeof i=="object"?eo(i,t):n`${s}=${i}`).join("&")}ie.explode=eo;function du(r,t=qe.encodeReserved){let n=(0,qe.encode)(t);return Object.entries(r).filter(([,s])=>s!==void 0).map(([s,i])=>{let c=JSON.stringify(i);return n`${s}=${c}`}).join("&")}ie.json=du;ie.form=(0,qe.delimited)();ie.pipe=(0,qe.delimited)("|");ie.space=(0,qe.delimited)("%20")});var ro=it(me=>{"use strict";var fu=me&&me.__createBinding||(Object.create?(function(r,t,n,s){s===void 0&&(s=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(r,s,i)}):(function(r,t,n,s){s===void 0&&(s=n),r[s]=t[n]})),pu=me&&me.__setModuleDefault||(Object.create?(function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}):function(r,t){r.default=t}),mu=me&&me.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var n in r)n!=="default"&&Object.prototype.hasOwnProperty.call(r,n)&&fu(t,r,n);return pu(t,r),t},Kr=me&&me.__awaiter||function(r,t,n,s){function i(c){return c instanceof n?c:new n(function(d){d(c)})}return new(n||(n=Promise))(function(c,d){function b(y){try{h(s.next(y))}catch(O){d(O)}}function p(y){try{h(s.throw(y))}catch(O){d(O)}}function h(y){y.done?c(y.value):i(y.value).then(b,p)}h((s=s.apply(r,t||[])).next())})},Zr=me&&me.__rest||function(r,t){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&t.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(r);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(r,s[i])&&(n[s[i]]=r[s[i]]);return n};Object.defineProperty(me,"__esModule",{value:!0});me.runtime=void 0;var hu=mu(ia()),to=oa(),bu=na();function yu(r){function t(p,h){return Kr(this,void 0,void 0,function*(){let y=yield i(p,h),O;try{O=yield y.text()}catch{}return{status:y.status,headers:y.headers,contentType:y.headers.get("content-type"),data:O}})}function n(p,h={}){return Kr(this,void 0,void 0,function*(){let{status:y,headers:O,contentType:E,data:k}=yield t(p,Object.assign(Object.assign({},h),{headers:Object.assign({Accept:"application/json"},h.headers)}));return(E?E.includes("json"):!1)?{status:y,headers:O,data:k?JSON.parse(k):null}:{status:y,headers:O,data:k}})}function s(p,h={}){return Kr(this,void 0,void 0,function*(){let y=yield i(p,h),O;try{O=yield y.blob()}catch{}return{status:y.status,headers:y.headers,data:O}})}function i(p,h={}){return Kr(this,void 0,void 0,function*(){let y=Object.assign(Object.assign({},r),h),{baseUrl:O,headers:E,fetch:k}=y,_=Zr(y,["baseUrl","headers","fetch"]),R=(0,to.joinUrl)(O,p);return yield(k||fetch)(R,Object.assign(Object.assign({},_),{headers:(0,to.stripUndefined)(Object.assign(Object.assign({},r.headers),E))}))})}function c(p){return p?.match(/\bjson\b/i)?p:"application/json"}function d(p){return p?.startsWith("application/x-www-form-urlencoded")?p:"application/x-www-form-urlencoded"}function b(p){return p?.startsWith("multipart/form-data")?p:"multipart/form-data"}return{ok:bu.ok,fetchText:t,fetchJson:n,fetchBlob:s,json(p){var{body:h,headers:y}=p,O=Zr(p,["body","headers"]);return Object.assign(Object.assign(Object.assign({},O),h!=null&&{body:JSON.stringify(h)}),{headers:Object.assign(Object.assign({},y),{"Content-Type":c(String(y?.["Content-Type"]))})})},form(p){var{body:h,headers:y}=p,O=Zr(p,["body","headers"]);return Object.assign(Object.assign(Object.assign({},O),h!=null&&{body:hu.form(h)}),{headers:Object.assign(Object.assign({},y),{"Content-Type":d(String(y?.["Content-Type"]))})})},multipart(p){var{body:h,headers:y}=p,O=Zr(p,["body","headers"]);if(h==null)return O;let E=new(r.formDataConstructor||O.formDataConstructor||FormData),k=(_,R)=>{typeof R=="string"||R instanceof Blob?E.append(_,R):E.append(_,new Blob([JSON.stringify(R)],{type:"application/json"}))};return Object.entries(h).forEach(([_,R])=>{Array.isArray(R)?R.forEach(P=>k(_,P)):k(_,R)}),Object.assign(Object.assign({},O),{body:E,headers:Object.assign(Object.assign({},y),{"Content-Type":b(String(y?.["Content-Type"]))})})}}}me.runtime=yu});var io=it((Xr,oo)=>{(function(r,t){typeof Xr=="object"&&typeof oo<"u"?t(Xr):typeof define=="function"&&define.amd?define(["exports"],t):(r=typeof globalThis<"u"?globalThis:r||self,t(r.WebStreamsPolyfill={}))})(Xr,(function(r){"use strict";let t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function n(){}function s(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let i=s();function c(e){return typeof e=="object"&&e!==null||typeof e=="function"}let d=n,b=Promise,p=Promise.prototype.then,h=Promise.resolve.bind(b),y=Promise.reject.bind(b);function O(e){return new b(e)}function E(e){return h(e)}function k(e){return y(e)}function _(e,a,o){return p.call(e,a,o)}function R(e,a,o){_(_(e,a,o),void 0,d)}function P(e,a){R(e,a)}function v(e,a){R(e,void 0,a)}function W(e,a,o){return _(e,a,o)}function B(e){_(e,void 0,d)}let $=(()=>{let e=i&&i.queueMicrotask;if(typeof e=="function")return e;let a=E(void 0);return o=>_(a,o)})();function F(e,a,o){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,a,o)}function U(e,a,o){try{return E(F(e,a,o))}catch(u){return k(u)}}let ae=16384;class ee{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(a){let o=this._back,u=o;o._elements.length===ae-1&&(u={_elements:[],_next:void 0}),o._elements.push(a),u!==o&&(this._back=u,o._next=u),++this._size}shift(){let a=this._front,o=a,u=this._cursor,f=u+1,g=a._elements,w=g[u];return f===ae&&(o=a._next,f=0),--this._size,this._cursor=f,a!==o&&(this._front=o),g[u]=void 0,w}forEach(a){let o=this._cursor,u=this._front,f=u._elements;for(;(o!==f.length||u._next!==void 0)&&!(o===f.length&&(u=u._next,f=u._elements,o=0,f.length===0));)a(f[o]),++o}peek(){let a=this._front,o=this._cursor;return a._elements[o]}}function Ae(e,a){e._ownerReadableStream=a,a._reader=e,a._state==="readable"?te(e):a._state==="closed"?q(e):oe(e,a._storedError)}function Ie(e,a){let o=e._ownerReadableStream;return Te(o,a)}function Y(e){e._ownerReadableStream._state==="readable"?I(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):K(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function G(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function te(e){e._closedPromise=O((a,o)=>{e._closedPromise_resolve=a,e._closedPromise_reject=o})}function oe(e,a){te(e),I(e,a)}function q(e){te(e),Z(e)}function I(e,a){e._closedPromise_reject!==void 0&&(B(e._closedPromise),e._closedPromise_reject(a),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function K(e,a){oe(e,a)}function Z(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let Ue=t("[[AbortSteps]]"),et=t("[[ErrorSteps]]"),ce=t("[[CancelSteps]]"),ue=t("[[PullSteps]]"),ur=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},pn=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function mn(e){return typeof e=="object"||typeof e=="function"}function $e(e,a){if(e!==void 0&&!mn(e))throw new TypeError(`${a} is not an object.`)}function ye(e,a){if(typeof e!="function")throw new TypeError(`${a} is not a function.`)}function hn(e){return typeof e=="object"&&e!==null||typeof e=="function"}function lr(e,a){if(!hn(e))throw new TypeError(`${a} is not an object.`)}function Pe(e,a,o){if(e===void 0)throw new TypeError(`Parameter ${a} is required in '${o}'.`)}function Ut(e,a,o){if(e===void 0)throw new TypeError(`${a} is required in '${o}'.`)}function bn(e){return Number(e)}function ka(e){return e===0?0:e}function pi(e){return ka(pn(e))}function Ea(e,a){let u=Number.MAX_SAFE_INTEGER,f=Number(e);if(f=ka(f),!ur(f))throw new TypeError(`${a} is not a finite number`);if(f=pi(f),f<0||f>u)throw new TypeError(`${a} is outside the accepted range of 0 to ${u}, inclusive`);return!ur(f)||f===0?0:f}function yn(e,a){if(!Ge(e))throw new TypeError(`${a} is not a ReadableStream.`)}function mt(e){return new Mt(e)}function Ra(e,a){e._reader._readRequests.push(a)}function gn(e,a,o){let f=e._reader._readRequests.shift();o?f._closeSteps():f._chunkSteps(a)}function dr(e){return e._reader._readRequests.length}function xa(e){let a=e._reader;return!(a===void 0||!Qe(a))}class Mt{constructor(a){if(Pe(a,1,"ReadableStreamDefaultReader"),yn(a,"First parameter"),Ye(a))throw new TypeError("This stream has already been locked for exclusive reading by another reader");Ae(this,a),this._readRequests=new ee}get closed(){return Qe(this)?this._closedPromise:k(fr("closed"))}cancel(a=void 0){return Qe(this)?this._ownerReadableStream===void 0?k(G("cancel")):Ie(this,a):k(fr("cancel"))}read(){if(!Qe(this))return k(fr("read"));if(this._ownerReadableStream===void 0)return k(G("read from"));let a,o,u=O((g,w)=>{a=g,o=w});return qt(this,{_chunkSteps:g=>a({value:g,done:!1}),_closeSteps:()=>a({value:void 0,done:!0}),_errorSteps:g=>o(g)}),u}releaseLock(){if(!Qe(this))throw fr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");Y(this)}}}Object.defineProperties(Mt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Mt.prototype,t.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Qe(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof Mt}function qt(e,a){let o=e._ownerReadableStream;o._disturbed=!0,o._state==="closed"?a._closeSteps():o._state==="errored"?a._errorSteps(o._storedError):o._readableStreamController[ue](a)}function fr(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let $a=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class Pa{constructor(a,o){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=a,this._preventCancel=o}next(){let a=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?W(this._ongoingPromise,a,a):a(),this._ongoingPromise}return(a){let o=()=>this._returnSteps(a);return this._ongoingPromise?W(this._ongoingPromise,o,o):o()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let a=this._reader;if(a._ownerReadableStream===void 0)return k(G("iterate"));let o,u,f=O((w,x)=>{o=w,u=x});return qt(a,{_chunkSteps:w=>{this._ongoingPromise=void 0,$(()=>o({value:w,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,Y(a),o({value:void 0,done:!0})},_errorSteps:w=>{this._ongoingPromise=void 0,this._isFinished=!0,Y(a),u(w)}}),f}_returnSteps(a){if(this._isFinished)return Promise.resolve({value:a,done:!0});this._isFinished=!0;let o=this._reader;if(o._ownerReadableStream===void 0)return k(G("finish iterating"));if(!this._preventCancel){let u=Ie(o,a);return Y(o),W(u,()=>({value:a,done:!0}))}return Y(o),E({value:a,done:!0})}}let ja={next(){return Ta(this)?this._asyncIteratorImpl.next():k(va("next"))},return(e){return Ta(this)?this._asyncIteratorImpl.return(e):k(va("return"))}};$a!==void 0&&Object.setPrototypeOf(ja,$a);function mi(e,a){let o=mt(e),u=new Pa(o,a),f=Object.create(ja);return f._asyncIteratorImpl=u,f}function Ta(e){if(!c(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof Pa}catch{return!1}}function va(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let Ca=Number.isNaN||function(e){return e!==e};function Dt(e){return e.slice()}function Aa(e,a,o,u,f){new Uint8Array(e).set(new Uint8Array(o,u,f),a)}function $d(e){return e}function pr(e){return!1}function Ia(e,a,o){if(e.slice)return e.slice(a,o);let u=o-a,f=new ArrayBuffer(u);return Aa(f,0,e,a,u),f}function hi(e){return!(typeof e!="number"||Ca(e)||e<0)}function Ua(e){let a=Ia(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(a)}function Sn(e){let a=e._queue.shift();return e._queueTotalSize-=a.size,e._queueTotalSize<0&&(e._queueTotalSize=0),a.value}function wn(e,a,o){if(!hi(o)||o===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:a,size:o}),e._queueTotalSize+=o}function bi(e){return e._queue.peek().value}function Ve(e){e._queue=new ee,e._queueTotalSize=0}class Lt{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!_n(this))throw Rn("view");return this._view}respond(a){if(!_n(this))throw Rn("respond");if(Pe(a,1,"respond"),a=Ea(a,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");pr(this._view.buffer),gr(this._associatedReadableByteStreamController,a)}respondWithNewView(a){if(!_n(this))throw Rn("respondWithNewView");if(Pe(a,1,"respondWithNewView"),!ArrayBuffer.isView(a))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");pr(a.buffer),Sr(this._associatedReadableByteStreamController,a)}}Object.defineProperties(Lt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Lt.prototype,t.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class ht{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!tt(this))throw zt("byobRequest");return En(this)}get desiredSize(){if(!tt(this))throw zt("desiredSize");return Fa(this)}close(){if(!tt(this))throw zt("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let a=this._controlledReadableByteStream._state;if(a!=="readable")throw new TypeError(`The stream (in ${a} state) is not in the readable state and cannot be closed`);Bt(this)}enqueue(a){if(!tt(this))throw zt("enqueue");if(Pe(a,1,"enqueue"),!ArrayBuffer.isView(a))throw new TypeError("chunk must be an array buffer view");if(a.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(a.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let o=this._controlledReadableByteStream._state;if(o!=="readable")throw new TypeError(`The stream (in ${o} state) is not in the readable state and cannot be enqueued to`);yr(this,a)}error(a=void 0){if(!tt(this))throw zt("error");je(this,a)}[ce](a){Ma(this),Ve(this);let o=this._cancelAlgorithm(a);return br(this),o}[ue](a){let o=this._controlledReadableByteStream;if(this._queueTotalSize>0){let f=this._queue.shift();this._queueTotalSize-=f.byteLength,Ba(this);let g=new Uint8Array(f.buffer,f.byteOffset,f.byteLength);a._chunkSteps(g);return}let u=this._autoAllocateChunkSize;if(u!==void 0){let f;try{f=new ArrayBuffer(u)}catch(w){a._errorSteps(w);return}let g={buffer:f,bufferByteLength:u,byteOffset:0,byteLength:u,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(g)}Ra(o,a),rt(this)}}Object.defineProperties(ht.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(ht.prototype,t.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function tt(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof ht}function _n(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof Lt}function rt(e){if(!wi(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let o=e._pullAlgorithm();R(o,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,rt(e))},u=>{je(e,u)})}function Ma(e){kn(e),e._pendingPullIntos=new ee}function On(e,a){let o=!1;e._state==="closed"&&(o=!0);let u=qa(a);a.readerType==="default"?gn(e,u,o):ki(e,u,o)}function qa(e){let a=e.bytesFilled,o=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,a/o)}function mr(e,a,o,u){e._queue.push({buffer:a,byteOffset:o,byteLength:u}),e._queueTotalSize+=u}function Da(e,a){let o=a.elementSize,u=a.bytesFilled-a.bytesFilled%o,f=Math.min(e._queueTotalSize,a.byteLength-a.bytesFilled),g=a.bytesFilled+f,w=g-g%o,x=f,M=!1;w>u&&(x=w-a.bytesFilled,M=!0);let z=e._queue;for(;x>0;){let N=z.peek(),Q=Math.min(x,N.byteLength),X=a.byteOffset+a.bytesFilled;Aa(a.buffer,X,N.buffer,N.byteOffset,Q),N.byteLength===Q?z.shift():(N.byteOffset+=Q,N.byteLength-=Q),e._queueTotalSize-=Q,La(e,Q,a),x-=Q}return M}function La(e,a,o){o.bytesFilled+=a}function Ba(e){e._queueTotalSize===0&&e._closeRequested?(br(e),Gt(e._controlledReadableByteStream)):rt(e)}function kn(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function za(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let a=e._pendingPullIntos.peek();Da(e,a)&&(hr(e),On(e._controlledReadableByteStream,a))}}function yi(e,a,o){let u=e._controlledReadableByteStream,f=1;a.constructor!==DataView&&(f=a.constructor.BYTES_PER_ELEMENT);let g=a.constructor,w=a.buffer,x={buffer:w,bufferByteLength:w.byteLength,byteOffset:a.byteOffset,byteLength:a.byteLength,bytesFilled:0,elementSize:f,viewConstructor:g,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(x),Va(u,o);return}if(u._state==="closed"){let M=new g(x.buffer,x.byteOffset,0);o._closeSteps(M);return}if(e._queueTotalSize>0){if(Da(e,x)){let M=qa(x);Ba(e),o._chunkSteps(M);return}if(e._closeRequested){let M=new TypeError("Insufficient bytes to fill elements in the given buffer");je(e,M),o._errorSteps(M);return}}e._pendingPullIntos.push(x),Va(u,o),rt(e)}function gi(e,a){let o=e._controlledReadableByteStream;if(xn(o))for(;Ja(o)>0;){let u=hr(e);On(o,u)}}function Si(e,a,o){if(La(e,a,o),o.bytesFilled<o.elementSize)return;hr(e);let u=o.bytesFilled%o.elementSize;if(u>0){let f=o.byteOffset+o.bytesFilled,g=Ia(o.buffer,f-u,f);mr(e,g,0,g.byteLength)}o.bytesFilled-=u,On(e._controlledReadableByteStream,o),za(e)}function Wa(e,a){let o=e._pendingPullIntos.peek();kn(e),e._controlledReadableByteStream._state==="closed"?gi(e):Si(e,a,o),rt(e)}function hr(e){return e._pendingPullIntos.shift()}function wi(e){let a=e._controlledReadableByteStream;return a._state!=="readable"||e._closeRequested||!e._started?!1:!!(xa(a)&&dr(a)>0||xn(a)&&Ja(a)>0||Fa(e)>0)}function br(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function Bt(e){let a=e._controlledReadableByteStream;if(!(e._closeRequested||a._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let u=new TypeError("Insufficient bytes to fill elements in the given buffer");throw je(e,u),u}br(e),Gt(a)}}function yr(e,a){let o=e._controlledReadableByteStream;if(e._closeRequested||o._state!=="readable")return;let u=a.buffer,f=a.byteOffset,g=a.byteLength,w=u;if(e._pendingPullIntos.length>0){let x=e._pendingPullIntos.peek();pr(x.buffer),x.buffer=x.buffer}if(kn(e),xa(o))if(dr(o)===0)mr(e,w,f,g);else{e._pendingPullIntos.length>0&&hr(e);let x=new Uint8Array(w,f,g);gn(o,x,!1)}else xn(o)?(mr(e,w,f,g),za(e)):mr(e,w,f,g);rt(e)}function je(e,a){let o=e._controlledReadableByteStream;o._state==="readable"&&(Ma(e),Ve(e),br(e),ys(o,a))}function En(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let a=e._pendingPullIntos.peek(),o=new Uint8Array(a.buffer,a.byteOffset+a.bytesFilled,a.byteLength-a.bytesFilled),u=Object.create(Lt.prototype);Oi(u,e,o),e._byobRequest=u}return e._byobRequest}function Fa(e){let a=e._controlledReadableByteStream._state;return a==="errored"?null:a==="closed"?0:e._strategyHWM-e._queueTotalSize}function gr(e,a){let o=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(a!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(a===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(o.bytesFilled+a>o.byteLength)throw new RangeError("bytesWritten out of range")}o.buffer=o.buffer,Wa(e,a)}function Sr(e,a){let o=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(a.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(a.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(o.byteOffset+o.bytesFilled!==a.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(o.bufferByteLength!==a.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(o.bytesFilled+a.byteLength>o.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let f=a.byteLength;o.buffer=a.buffer,Wa(e,f)}function Na(e,a,o,u,f,g,w){a._controlledReadableByteStream=e,a._pullAgain=!1,a._pulling=!1,a._byobRequest=null,a._queue=a._queueTotalSize=void 0,Ve(a),a._closeRequested=!1,a._started=!1,a._strategyHWM=g,a._pullAlgorithm=u,a._cancelAlgorithm=f,a._autoAllocateChunkSize=w,a._pendingPullIntos=new ee,e._readableStreamController=a;let x=o();R(E(x),()=>{a._started=!0,rt(a)},M=>{je(a,M)})}function _i(e,a,o){let u=Object.create(ht.prototype),f=()=>{},g=()=>E(void 0),w=()=>E(void 0);a.start!==void 0&&(f=()=>a.start(u)),a.pull!==void 0&&(g=()=>a.pull(u)),a.cancel!==void 0&&(w=M=>a.cancel(M));let x=a.autoAllocateChunkSize;if(x===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Na(e,u,f,g,w,o,x)}function Oi(e,a,o){e._associatedReadableByteStreamController=a,e._view=o}function Rn(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function zt(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function Qa(e){return new Wt(e)}function Va(e,a){e._reader._readIntoRequests.push(a)}function ki(e,a,o){let f=e._reader._readIntoRequests.shift();o?f._closeSteps(a):f._chunkSteps(a)}function Ja(e){return e._reader._readIntoRequests.length}function xn(e){let a=e._reader;return!(a===void 0||!nt(a))}class Wt{constructor(a){if(Pe(a,1,"ReadableStreamBYOBReader"),yn(a,"First parameter"),Ye(a))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!tt(a._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");Ae(this,a),this._readIntoRequests=new ee}get closed(){return nt(this)?this._closedPromise:k(wr("closed"))}cancel(a=void 0){return nt(this)?this._ownerReadableStream===void 0?k(G("cancel")):Ie(this,a):k(wr("cancel"))}read(a){if(!nt(this))return k(wr("read"));if(!ArrayBuffer.isView(a))return k(new TypeError("view must be an array buffer view"));if(a.byteLength===0)return k(new TypeError("view must have non-zero byteLength"));if(a.buffer.byteLength===0)return k(new TypeError("view's buffer must have non-zero byteLength"));if(pr(a.buffer),this._ownerReadableStream===void 0)return k(G("read from"));let o,u,f=O((w,x)=>{o=w,u=x});return Ha(this,a,{_chunkSteps:w=>o({value:w,done:!1}),_closeSteps:w=>o({value:w,done:!0}),_errorSteps:w=>u(w)}),f}releaseLock(){if(!nt(this))throw wr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");Y(this)}}}Object.defineProperties(Wt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Wt.prototype,t.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function nt(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof Wt}function Ha(e,a,o){let u=e._ownerReadableStream;u._disturbed=!0,u._state==="errored"?o._errorSteps(u._storedError):yi(u._readableStreamController,a,o)}function wr(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function Ft(e,a){let{highWaterMark:o}=e;if(o===void 0)return a;if(Ca(o)||o<0)throw new RangeError("Invalid highWaterMark");return o}function _r(e){let{size:a}=e;return a||(()=>1)}function Or(e,a){$e(e,a);let o=e?.highWaterMark,u=e?.size;return{highWaterMark:o===void 0?void 0:bn(o),size:u===void 0?void 0:Ei(u,`${a} has member 'size' that`)}}function Ei(e,a){return ye(e,a),o=>bn(e(o))}function Ri(e,a){$e(e,a);let o=e?.abort,u=e?.close,f=e?.start,g=e?.type,w=e?.write;return{abort:o===void 0?void 0:xi(o,e,`${a} has member 'abort' that`),close:u===void 0?void 0:$i(u,e,`${a} has member 'close' that`),start:f===void 0?void 0:Pi(f,e,`${a} has member 'start' that`),write:w===void 0?void 0:ji(w,e,`${a} has member 'write' that`),type:g}}function xi(e,a,o){return ye(e,o),u=>U(e,a,[u])}function $i(e,a,o){return ye(e,o),()=>U(e,a,[])}function Pi(e,a,o){return ye(e,o),u=>F(e,a,[u])}function ji(e,a,o){return ye(e,o),(u,f)=>U(e,a,[u,f])}function Ga(e,a){if(!bt(e))throw new TypeError(`${a} is not a WritableStream.`)}function Ti(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let vi=typeof AbortController=="function";function Ci(){if(vi)return new AbortController}class Nt{constructor(a={},o={}){a===void 0?a=null:lr(a,"First parameter");let u=Or(o,"Second parameter"),f=Ri(a,"First parameter");if(Ka(this),f.type!==void 0)throw new RangeError("Invalid type is specified");let w=_r(u),x=Ft(u,1);Vi(this,f,x,w)}get locked(){if(!bt(this))throw $r("locked");return yt(this)}abort(a=void 0){return bt(this)?yt(this)?k(new TypeError("Cannot abort a stream that already has a writer")):kr(this,a):k($r("abort"))}close(){return bt(this)?yt(this)?k(new TypeError("Cannot close a stream that already has a writer")):Me(this)?k(new TypeError("Cannot close an already-closing stream")):Za(this):k($r("close"))}getWriter(){if(!bt(this))throw $r("getWriter");return Ya(this)}}Object.defineProperties(Nt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Nt.prototype,t.toStringTag,{value:"WritableStream",configurable:!0});function Ya(e){return new Qt(e)}function Ai(e,a,o,u,f=1,g=()=>1){let w=Object.create(Nt.prototype);Ka(w);let x=Object.create(gt.prototype);return as(w,x,e,a,o,u,f,g),w}function Ka(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new ee,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function bt(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof Nt}function yt(e){return e._writer!==void 0}function kr(e,a){var o;if(e._state==="closed"||e._state==="errored")return E(void 0);e._writableStreamController._abortReason=a,(o=e._writableStreamController._abortController)===null||o===void 0||o.abort();let u=e._state;if(u==="closed"||u==="errored")return E(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let f=!1;u==="erroring"&&(f=!0,a=void 0);let g=O((w,x)=>{e._pendingAbortRequest={_promise:void 0,_resolve:w,_reject:x,_reason:a,_wasAlreadyErroring:f}});return e._pendingAbortRequest._promise=g,f||Pn(e,a),g}function Za(e){let a=e._state;if(a==="closed"||a==="errored")return k(new TypeError(`The stream (in ${a} state) is not in the writable state and cannot be closed`));let o=O((f,g)=>{let w={_resolve:f,_reject:g};e._closeRequest=w}),u=e._writer;return u!==void 0&&e._backpressure&&a==="writable"&&qn(u),Ji(e._writableStreamController),o}function Ii(e){return O((o,u)=>{let f={_resolve:o,_reject:u};e._writeRequests.push(f)})}function $n(e,a){if(e._state==="writable"){Pn(e,a);return}jn(e)}function Pn(e,a){let o=e._writableStreamController;e._state="erroring",e._storedError=a;let u=e._writer;u!==void 0&&es(u,a),!Li(e)&&o._started&&jn(e)}function jn(e){e._state="errored",e._writableStreamController[et]();let a=e._storedError;if(e._writeRequests.forEach(f=>{f._reject(a)}),e._writeRequests=new ee,e._pendingAbortRequest===void 0){Er(e);return}let o=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,o._wasAlreadyErroring){o._reject(a),Er(e);return}let u=e._writableStreamController[Ue](o._reason);R(u,()=>{o._resolve(),Er(e)},f=>{o._reject(f),Er(e)})}function Ui(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function Mi(e,a){e._inFlightWriteRequest._reject(a),e._inFlightWriteRequest=void 0,$n(e,a)}function qi(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let o=e._writer;o!==void 0&&cs(o)}function Di(e,a){e._inFlightCloseRequest._reject(a),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(a),e._pendingAbortRequest=void 0),$n(e,a)}function Me(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function Li(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function Bi(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function zi(e){e._inFlightWriteRequest=e._writeRequests.shift()}function Er(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let a=e._writer;a!==void 0&&Un(a,e._storedError)}function Tn(e,a){let o=e._writer;o!==void 0&&a!==e._backpressure&&(a?ec(o):qn(o)),e._backpressure=a}class Qt{constructor(a){if(Pe(a,1,"WritableStreamDefaultWriter"),Ga(a,"First parameter"),yt(a))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=a,a._writer=this;let o=a._state;if(o==="writable")!Me(a)&&a._backpressure?jr(this):us(this),Pr(this);else if(o==="erroring")Mn(this,a._storedError),Pr(this);else if(o==="closed")us(this),Zi(this);else{let u=a._storedError;Mn(this,u),is(this,u)}}get closed(){return at(this)?this._closedPromise:k(st("closed"))}get desiredSize(){if(!at(this))throw st("desiredSize");if(this._ownerWritableStream===void 0)throw Vt("desiredSize");return Qi(this)}get ready(){return at(this)?this._readyPromise:k(st("ready"))}abort(a=void 0){return at(this)?this._ownerWritableStream===void 0?k(Vt("abort")):Wi(this,a):k(st("abort"))}close(){if(!at(this))return k(st("close"));let a=this._ownerWritableStream;return a===void 0?k(Vt("close")):Me(a)?k(new TypeError("Cannot close an already-closing stream")):Xa(this)}releaseLock(){if(!at(this))throw st("releaseLock");this._ownerWritableStream!==void 0&&ts(this)}write(a=void 0){return at(this)?this._ownerWritableStream===void 0?k(Vt("write to")):rs(this,a):k(st("write"))}}Object.defineProperties(Qt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Qt.prototype,t.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function at(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof Qt}function Wi(e,a){let o=e._ownerWritableStream;return kr(o,a)}function Xa(e){let a=e._ownerWritableStream;return Za(a)}function Fi(e){let a=e._ownerWritableStream,o=a._state;return Me(a)||o==="closed"?E(void 0):o==="errored"?k(a._storedError):Xa(e)}function Ni(e,a){e._closedPromiseState==="pending"?Un(e,a):Xi(e,a)}function es(e,a){e._readyPromiseState==="pending"?ls(e,a):tc(e,a)}function Qi(e){let a=e._ownerWritableStream,o=a._state;return o==="errored"||o==="erroring"?null:o==="closed"?0:ss(a._writableStreamController)}function ts(e){let a=e._ownerWritableStream,o=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");es(e,o),Ni(e,o),a._writer=void 0,e._ownerWritableStream=void 0}function rs(e,a){let o=e._ownerWritableStream,u=o._writableStreamController,f=Hi(u,a);if(o!==e._ownerWritableStream)return k(Vt("write to"));let g=o._state;if(g==="errored")return k(o._storedError);if(Me(o)||g==="closed")return k(new TypeError("The stream is closing or closed and cannot be written to"));if(g==="erroring")return k(o._storedError);let w=Ii(o);return Gi(u,a,f),w}let ns={};class gt{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!vn(this))throw In("abortReason");return this._abortReason}get signal(){if(!vn(this))throw In("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(a=void 0){if(!vn(this))throw In("error");this._controlledWritableStream._state==="writable"&&os(this,a)}[Ue](a){let o=this._abortAlgorithm(a);return Rr(this),o}[et](){Ve(this)}}Object.defineProperties(gt.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(gt.prototype,t.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function vn(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof gt}function as(e,a,o,u,f,g,w,x){a._controlledWritableStream=e,e._writableStreamController=a,a._queue=void 0,a._queueTotalSize=void 0,Ve(a),a._abortReason=void 0,a._abortController=Ci(),a._started=!1,a._strategySizeAlgorithm=x,a._strategyHWM=w,a._writeAlgorithm=u,a._closeAlgorithm=f,a._abortAlgorithm=g;let M=An(a);Tn(e,M);let z=o(),N=E(z);R(N,()=>{a._started=!0,xr(a)},Q=>{a._started=!0,$n(e,Q)})}function Vi(e,a,o,u){let f=Object.create(gt.prototype),g=()=>{},w=()=>E(void 0),x=()=>E(void 0),M=()=>E(void 0);a.start!==void 0&&(g=()=>a.start(f)),a.write!==void 0&&(w=z=>a.write(z,f)),a.close!==void 0&&(x=()=>a.close()),a.abort!==void 0&&(M=z=>a.abort(z)),as(e,f,g,w,x,M,o,u)}function Rr(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Ji(e){wn(e,ns,0),xr(e)}function Hi(e,a){try{return e._strategySizeAlgorithm(a)}catch(o){return Cn(e,o),1}}function ss(e){return e._strategyHWM-e._queueTotalSize}function Gi(e,a,o){try{wn(e,a,o)}catch(f){Cn(e,f);return}let u=e._controlledWritableStream;if(!Me(u)&&u._state==="writable"){let f=An(e);Tn(u,f)}xr(e)}function xr(e){let a=e._controlledWritableStream;if(!e._started||a._inFlightWriteRequest!==void 0)return;if(a._state==="erroring"){jn(a);return}if(e._queue.length===0)return;let u=bi(e);u===ns?Yi(e):Ki(e,u)}function Cn(e,a){e._controlledWritableStream._state==="writable"&&os(e,a)}function Yi(e){let a=e._controlledWritableStream;Bi(a),Sn(e);let o=e._closeAlgorithm();Rr(e),R(o,()=>{qi(a)},u=>{Di(a,u)})}function Ki(e,a){let o=e._controlledWritableStream;zi(o);let u=e._writeAlgorithm(a);R(u,()=>{Ui(o);let f=o._state;if(Sn(e),!Me(o)&&f==="writable"){let g=An(e);Tn(o,g)}xr(e)},f=>{o._state==="writable"&&Rr(e),Mi(o,f)})}function An(e){return ss(e)<=0}function os(e,a){let o=e._controlledWritableStream;Rr(e),Pn(o,a)}function $r(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function In(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function st(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function Vt(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function Pr(e){e._closedPromise=O((a,o)=>{e._closedPromise_resolve=a,e._closedPromise_reject=o,e._closedPromiseState="pending"})}function is(e,a){Pr(e),Un(e,a)}function Zi(e){Pr(e),cs(e)}function Un(e,a){e._closedPromise_reject!==void 0&&(B(e._closedPromise),e._closedPromise_reject(a),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function Xi(e,a){is(e,a)}function cs(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function jr(e){e._readyPromise=O((a,o)=>{e._readyPromise_resolve=a,e._readyPromise_reject=o}),e._readyPromiseState="pending"}function Mn(e,a){jr(e),ls(e,a)}function us(e){jr(e),qn(e)}function ls(e,a){e._readyPromise_reject!==void 0&&(B(e._readyPromise),e._readyPromise_reject(a),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function ec(e){jr(e)}function tc(e,a){Mn(e,a)}function qn(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let ds=typeof DOMException<"u"?DOMException:void 0;function rc(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function nc(){let e=function(o,u){this.message=o||"",this.name=u||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let ac=rc(ds)?ds:nc();function fs(e,a,o,u,f,g){let w=mt(e),x=Ya(a);e._disturbed=!0;let M=!1,z=E(void 0);return O((N,Q)=>{let X;if(g!==void 0){if(X=()=>{let j=new ac("Aborted","AbortError"),D=[];u||D.push(()=>a._state==="writable"?kr(a,j):E(void 0)),f||D.push(()=>e._state==="readable"?Te(e,j):E(void 0)),pe(()=>Promise.all(D.map(J=>J())),!0,j)},g.aborted){X();return}g.addEventListener("abort",X)}function ve(){return O((j,D)=>{function J(ge){ge?j():_(_t(),J,D)}J(!1)})}function _t(){return M?E(!0):_(x._readyPromise,()=>O((j,D)=>{qt(w,{_chunkSteps:J=>{z=_(rs(x,J),void 0,n),j(!1)},_closeSteps:()=>j(!0),_errorSteps:D})}))}if(Be(e,w._closedPromise,j=>{u?Oe(!0,j):pe(()=>kr(a,j),!0,j)}),Be(a,x._closedPromise,j=>{f?Oe(!0,j):pe(()=>Te(e,j),!0,j)}),le(e,w._closedPromise,()=>{o?Oe():pe(()=>Fi(x))}),Me(a)||a._state==="closed"){let j=new TypeError("the destination writable stream closed before all data could be piped to it");f?Oe(!0,j):pe(()=>Te(e,j),!0,j)}B(ve());function Ke(){let j=z;return _(z,()=>j!==z?Ke():void 0)}function Be(j,D,J){j._state==="errored"?J(j._storedError):v(D,J)}function le(j,D,J){j._state==="closed"?J():P(D,J)}function pe(j,D,J){if(M)return;M=!0,a._state==="writable"&&!Me(a)?P(Ke(),ge):ge();function ge(){R(j(),()=>ze(D,J),Ot=>ze(!0,Ot))}}function Oe(j,D){M||(M=!0,a._state==="writable"&&!Me(a)?P(Ke(),()=>ze(j,D)):ze(j,D))}function ze(j,D){ts(x),Y(w),g!==void 0&&g.removeEventListener("abort",X),j?Q(D):N(void 0)}})}class St{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Tr(this))throw Ar("desiredSize");return Dn(this)}close(){if(!Tr(this))throw Ar("close");if(!wt(this))throw new TypeError("The stream is not in a state that permits close");Ht(this)}enqueue(a=void 0){if(!Tr(this))throw Ar("enqueue");if(!wt(this))throw new TypeError("The stream is not in a state that permits enqueue");return Cr(this,a)}error(a=void 0){if(!Tr(this))throw Ar("error");Je(this,a)}[ce](a){Ve(this);let o=this._cancelAlgorithm(a);return vr(this),o}[ue](a){let o=this._controlledReadableStream;if(this._queue.length>0){let u=Sn(this);this._closeRequested&&this._queue.length===0?(vr(this),Gt(o)):Jt(this),a._chunkSteps(u)}else Ra(o,a),Jt(this)}}Object.defineProperties(St.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(St.prototype,t.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Tr(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof St}function Jt(e){if(!ps(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let o=e._pullAlgorithm();R(o,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Jt(e))},u=>{Je(e,u)})}function ps(e){let a=e._controlledReadableStream;return!wt(e)||!e._started?!1:!!(Ye(a)&&dr(a)>0||Dn(e)>0)}function vr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Ht(e){if(!wt(e))return;let a=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(vr(e),Gt(a))}function Cr(e,a){if(!wt(e))return;let o=e._controlledReadableStream;if(Ye(o)&&dr(o)>0)gn(o,a,!1);else{let u;try{u=e._strategySizeAlgorithm(a)}catch(f){throw Je(e,f),f}try{wn(e,a,u)}catch(f){throw Je(e,f),f}}Jt(e)}function Je(e,a){let o=e._controlledReadableStream;o._state==="readable"&&(Ve(e),vr(e),ys(o,a))}function Dn(e){let a=e._controlledReadableStream._state;return a==="errored"?null:a==="closed"?0:e._strategyHWM-e._queueTotalSize}function sc(e){return!ps(e)}function wt(e){let a=e._controlledReadableStream._state;return!e._closeRequested&&a==="readable"}function ms(e,a,o,u,f,g,w){a._controlledReadableStream=e,a._queue=void 0,a._queueTotalSize=void 0,Ve(a),a._started=!1,a._closeRequested=!1,a._pullAgain=!1,a._pulling=!1,a._strategySizeAlgorithm=w,a._strategyHWM=g,a._pullAlgorithm=u,a._cancelAlgorithm=f,e._readableStreamController=a;let x=o();R(E(x),()=>{a._started=!0,Jt(a)},M=>{Je(a,M)})}function oc(e,a,o,u){let f=Object.create(St.prototype),g=()=>{},w=()=>E(void 0),x=()=>E(void 0);a.start!==void 0&&(g=()=>a.start(f)),a.pull!==void 0&&(w=()=>a.pull(f)),a.cancel!==void 0&&(x=M=>a.cancel(M)),ms(e,f,g,w,x,o,u)}function Ar(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function ic(e,a){return tt(e._readableStreamController)?uc(e):cc(e)}function cc(e,a){let o=mt(e),u=!1,f=!1,g=!1,w=!1,x,M,z,N,Q,X=O(le=>{Q=le});function ve(){return u?(f=!0,E(void 0)):(u=!0,qt(o,{_chunkSteps:pe=>{$(()=>{f=!1;let Oe=pe,ze=pe;g||Cr(z._readableStreamController,Oe),w||Cr(N._readableStreamController,ze),u=!1,f&&ve()})},_closeSteps:()=>{u=!1,g||Ht(z._readableStreamController),w||Ht(N._readableStreamController),(!g||!w)&&Q(void 0)},_errorSteps:()=>{u=!1}}),E(void 0))}function _t(le){if(g=!0,x=le,w){let pe=Dt([x,M]),Oe=Te(e,pe);Q(Oe)}return X}function Ke(le){if(w=!0,M=le,g){let pe=Dt([x,M]),Oe=Te(e,pe);Q(Oe)}return X}function Be(){}return z=Ln(Be,ve,_t),N=Ln(Be,ve,Ke),v(o._closedPromise,le=>{Je(z._readableStreamController,le),Je(N._readableStreamController,le),(!g||!w)&&Q(void 0)}),[z,N]}function uc(e){let a=mt(e),o=!1,u=!1,f=!1,g=!1,w=!1,x,M,z,N,Q,X=O(j=>{Q=j});function ve(j){v(j._closedPromise,D=>{j===a&&(je(z._readableStreamController,D),je(N._readableStreamController,D),(!g||!w)&&Q(void 0))})}function _t(){nt(a)&&(Y(a),a=mt(e),ve(a)),qt(a,{_chunkSteps:D=>{$(()=>{u=!1,f=!1;let J=D,ge=D;if(!g&&!w)try{ge=Ua(D)}catch(Ot){je(z._readableStreamController,Ot),je(N._readableStreamController,Ot),Q(Te(e,Ot));return}g||yr(z._readableStreamController,J),w||yr(N._readableStreamController,ge),o=!1,u?Be():f&&le()})},_closeSteps:()=>{o=!1,g||Bt(z._readableStreamController),w||Bt(N._readableStreamController),z._readableStreamController._pendingPullIntos.length>0&&gr(z._readableStreamController,0),N._readableStreamController._pendingPullIntos.length>0&&gr(N._readableStreamController,0),(!g||!w)&&Q(void 0)},_errorSteps:()=>{o=!1}})}function Ke(j,D){Qe(a)&&(Y(a),a=Qa(e),ve(a));let J=D?N:z,ge=D?z:N;Ha(a,j,{_chunkSteps:kt=>{$(()=>{u=!1,f=!1;let Et=D?w:g;if(D?g:w)Et||Sr(J._readableStreamController,kt);else{let Ts;try{Ts=Ua(kt)}catch(zn){je(J._readableStreamController,zn),je(ge._readableStreamController,zn),Q(Te(e,zn));return}Et||Sr(J._readableStreamController,kt),yr(ge._readableStreamController,Ts)}o=!1,u?Be():f&&le()})},_closeSteps:kt=>{o=!1;let Et=D?w:g,Wr=D?g:w;Et||Bt(J._readableStreamController),Wr||Bt(ge._readableStreamController),kt!==void 0&&(Et||Sr(J._readableStreamController,kt),!Wr&&ge._readableStreamController._pendingPullIntos.length>0&&gr(ge._readableStreamController,0)),(!Et||!Wr)&&Q(void 0)},_errorSteps:()=>{o=!1}})}function Be(){if(o)return u=!0,E(void 0);o=!0;let j=En(z._readableStreamController);return j===null?_t():Ke(j._view,!1),E(void 0)}function le(){if(o)return f=!0,E(void 0);o=!0;let j=En(N._readableStreamController);return j===null?_t():Ke(j._view,!0),E(void 0)}function pe(j){if(g=!0,x=j,w){let D=Dt([x,M]),J=Te(e,D);Q(J)}return X}function Oe(j){if(w=!0,M=j,g){let D=Dt([x,M]),J=Te(e,D);Q(J)}return X}function ze(){}return z=bs(ze,Be,pe),N=bs(ze,le,Oe),ve(a),[z,N]}function lc(e,a){$e(e,a);let o=e,u=o?.autoAllocateChunkSize,f=o?.cancel,g=o?.pull,w=o?.start,x=o?.type;return{autoAllocateChunkSize:u===void 0?void 0:Ea(u,`${a} has member 'autoAllocateChunkSize' that`),cancel:f===void 0?void 0:dc(f,o,`${a} has member 'cancel' that`),pull:g===void 0?void 0:fc(g,o,`${a} has member 'pull' that`),start:w===void 0?void 0:pc(w,o,`${a} has member 'start' that`),type:x===void 0?void 0:mc(x,`${a} has member 'type' that`)}}function dc(e,a,o){return ye(e,o),u=>U(e,a,[u])}function fc(e,a,o){return ye(e,o),u=>U(e,a,[u])}function pc(e,a,o){return ye(e,o),u=>F(e,a,[u])}function mc(e,a){if(e=`${e}`,e!=="bytes")throw new TypeError(`${a} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function hc(e,a){$e(e,a);let o=e?.mode;return{mode:o===void 0?void 0:bc(o,`${a} has member 'mode' that`)}}function bc(e,a){if(e=`${e}`,e!=="byob")throw new TypeError(`${a} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function yc(e,a){return $e(e,a),{preventCancel:!!e?.preventCancel}}function hs(e,a){$e(e,a);let o=e?.preventAbort,u=e?.preventCancel,f=e?.preventClose,g=e?.signal;return g!==void 0&&gc(g,`${a} has member 'signal' that`),{preventAbort:!!o,preventCancel:!!u,preventClose:!!f,signal:g}}function gc(e,a){if(!Ti(e))throw new TypeError(`${a} is not an AbortSignal.`)}function Sc(e,a){$e(e,a);let o=e?.readable;Ut(o,"readable","ReadableWritablePair"),yn(o,`${a} has member 'readable' that`);let u=e?.writable;return Ut(u,"writable","ReadableWritablePair"),Ga(u,`${a} has member 'writable' that`),{readable:o,writable:u}}class He{constructor(a={},o={}){a===void 0?a=null:lr(a,"First parameter");let u=Or(o,"Second parameter"),f=lc(a,"First parameter");if(Bn(this),f.type==="bytes"){if(u.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let g=Ft(u,0);_i(this,f,g)}else{let g=_r(u),w=Ft(u,1);oc(this,f,w,g)}}get locked(){if(!Ge(this))throw ot("locked");return Ye(this)}cancel(a=void 0){return Ge(this)?Ye(this)?k(new TypeError("Cannot cancel a stream that already has a reader")):Te(this,a):k(ot("cancel"))}getReader(a=void 0){if(!Ge(this))throw ot("getReader");return hc(a,"First parameter").mode===void 0?mt(this):Qa(this)}pipeThrough(a,o={}){if(!Ge(this))throw ot("pipeThrough");Pe(a,1,"pipeThrough");let u=Sc(a,"First parameter"),f=hs(o,"Second parameter");if(Ye(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(yt(u.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let g=fs(this,u.writable,f.preventClose,f.preventAbort,f.preventCancel,f.signal);return B(g),u.readable}pipeTo(a,o={}){if(!Ge(this))return k(ot("pipeTo"));if(a===void 0)return k("Parameter 1 is required in 'pipeTo'.");if(!bt(a))return k(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let u;try{u=hs(o,"Second parameter")}catch(f){return k(f)}return Ye(this)?k(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):yt(a)?k(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):fs(this,a,u.preventClose,u.preventAbort,u.preventCancel,u.signal)}tee(){if(!Ge(this))throw ot("tee");let a=ic(this);return Dt(a)}values(a=void 0){if(!Ge(this))throw ot("values");let o=yc(a,"First parameter");return mi(this,o.preventCancel)}}Object.defineProperties(He.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(He.prototype,t.toStringTag,{value:"ReadableStream",configurable:!0}),typeof t.asyncIterator=="symbol"&&Object.defineProperty(He.prototype,t.asyncIterator,{value:He.prototype.values,writable:!0,configurable:!0});function Ln(e,a,o,u=1,f=()=>1){let g=Object.create(He.prototype);Bn(g);let w=Object.create(St.prototype);return ms(g,w,e,a,o,u,f),g}function bs(e,a,o){let u=Object.create(He.prototype);Bn(u);let f=Object.create(ht.prototype);return Na(u,f,e,a,o,0,void 0),u}function Bn(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function Ge(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof He}function Ye(e){return e._reader!==void 0}function Te(e,a){if(e._disturbed=!0,e._state==="closed")return E(void 0);if(e._state==="errored")return k(e._storedError);Gt(e);let o=e._reader;o!==void 0&&nt(o)&&(o._readIntoRequests.forEach(f=>{f._closeSteps(void 0)}),o._readIntoRequests=new ee);let u=e._readableStreamController[ce](a);return W(u,n)}function Gt(e){e._state="closed";let a=e._reader;a!==void 0&&(Z(a),Qe(a)&&(a._readRequests.forEach(o=>{o._closeSteps()}),a._readRequests=new ee))}function ys(e,a){e._state="errored",e._storedError=a;let o=e._reader;o!==void 0&&(I(o,a),Qe(o)?(o._readRequests.forEach(u=>{u._errorSteps(a)}),o._readRequests=new ee):(o._readIntoRequests.forEach(u=>{u._errorSteps(a)}),o._readIntoRequests=new ee))}function ot(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function gs(e,a){$e(e,a);let o=e?.highWaterMark;return Ut(o,"highWaterMark","QueuingStrategyInit"),{highWaterMark:bn(o)}}let Ss=e=>e.byteLength;try{Object.defineProperty(Ss,"name",{value:"size",configurable:!0})}catch{}class Ir{constructor(a){Pe(a,1,"ByteLengthQueuingStrategy"),a=gs(a,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=a.highWaterMark}get highWaterMark(){if(!_s(this))throw ws("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!_s(this))throw ws("size");return Ss}}Object.defineProperties(Ir.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ir.prototype,t.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function ws(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function _s(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof Ir}let Os=()=>1;try{Object.defineProperty(Os,"name",{value:"size",configurable:!0})}catch{}class Ur{constructor(a){Pe(a,1,"CountQueuingStrategy"),a=gs(a,"First parameter"),this._countQueuingStrategyHighWaterMark=a.highWaterMark}get highWaterMark(){if(!Es(this))throw ks("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Es(this))throw ks("size");return Os}}Object.defineProperties(Ur.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ur.prototype,t.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function ks(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function Es(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof Ur}function wc(e,a){$e(e,a);let o=e?.flush,u=e?.readableType,f=e?.start,g=e?.transform,w=e?.writableType;return{flush:o===void 0?void 0:_c(o,e,`${a} has member 'flush' that`),readableType:u,start:f===void 0?void 0:Oc(f,e,`${a} has member 'start' that`),transform:g===void 0?void 0:kc(g,e,`${a} has member 'transform' that`),writableType:w}}function _c(e,a,o){return ye(e,o),u=>U(e,a,[u])}function Oc(e,a,o){return ye(e,o),u=>F(e,a,[u])}function kc(e,a,o){return ye(e,o),(u,f)=>U(e,a,[u,f])}class Mr{constructor(a={},o={},u={}){a===void 0&&(a=null);let f=Or(o,"Second parameter"),g=Or(u,"Third parameter"),w=wc(a,"First parameter");if(w.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(w.writableType!==void 0)throw new RangeError("Invalid writableType specified");let x=Ft(g,0),M=_r(g),z=Ft(f,1),N=_r(f),Q,X=O(ve=>{Q=ve});Ec(this,X,z,N,x,M),xc(this,w),w.start!==void 0?Q(w.start(this._transformStreamController)):Q(void 0)}get readable(){if(!Rs(this))throw js("readable");return this._readable}get writable(){if(!Rs(this))throw js("writable");return this._writable}}Object.defineProperties(Mr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Mr.prototype,t.toStringTag,{value:"TransformStream",configurable:!0});function Ec(e,a,o,u,f,g){function w(){return a}function x(X){return jc(e,X)}function M(X){return Tc(e,X)}function z(){return vc(e)}e._writable=Ai(w,x,z,M,o,u);function N(){return Cc(e)}function Q(X){return Dr(e,X),E(void 0)}e._readable=Ln(w,N,Q,f,g),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Lr(e,!0),e._transformStreamController=void 0}function Rs(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof Mr}function qr(e,a){Je(e._readable._readableStreamController,a),Dr(e,a)}function Dr(e,a){xs(e._transformStreamController),Cn(e._writable._writableStreamController,a),e._backpressure&&Lr(e,!1)}function Lr(e,a){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=O(o=>{e._backpressureChangePromise_resolve=o}),e._backpressure=a}class Yt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Br(this))throw zr("desiredSize");let a=this._controlledTransformStream._readable._readableStreamController;return Dn(a)}enqueue(a=void 0){if(!Br(this))throw zr("enqueue");$s(this,a)}error(a=void 0){if(!Br(this))throw zr("error");$c(this,a)}terminate(){if(!Br(this))throw zr("terminate");Pc(this)}}Object.defineProperties(Yt.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Yt.prototype,t.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function Br(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof Yt}function Rc(e,a,o,u){a._controlledTransformStream=e,e._transformStreamController=a,a._transformAlgorithm=o,a._flushAlgorithm=u}function xc(e,a){let o=Object.create(Yt.prototype),u=g=>{try{return $s(o,g),E(void 0)}catch(w){return k(w)}},f=()=>E(void 0);a.transform!==void 0&&(u=g=>a.transform(g,o)),a.flush!==void 0&&(f=()=>a.flush(o)),Rc(e,o,u,f)}function xs(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function $s(e,a){let o=e._controlledTransformStream,u=o._readable._readableStreamController;if(!wt(u))throw new TypeError("Readable side is not in a state that permits enqueue");try{Cr(u,a)}catch(g){throw Dr(o,g),o._readable._storedError}sc(u)!==o._backpressure&&Lr(o,!0)}function $c(e,a){qr(e._controlledTransformStream,a)}function Ps(e,a){let o=e._transformAlgorithm(a);return W(o,void 0,u=>{throw qr(e._controlledTransformStream,u),u})}function Pc(e){let a=e._controlledTransformStream,o=a._readable._readableStreamController;Ht(o);let u=new TypeError("TransformStream terminated");Dr(a,u)}function jc(e,a){let o=e._transformStreamController;if(e._backpressure){let u=e._backpressureChangePromise;return W(u,()=>{let f=e._writable;if(f._state==="erroring")throw f._storedError;return Ps(o,a)})}return Ps(o,a)}function Tc(e,a){return qr(e,a),E(void 0)}function vc(e){let a=e._readable,o=e._transformStreamController,u=o._flushAlgorithm();return xs(o),W(u,()=>{if(a._state==="errored")throw a._storedError;Ht(a._readableStreamController)},f=>{throw qr(e,f),a._storedError})}function Cc(e){return Lr(e,!1),e._backpressureChangePromise}function zr(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function js(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}r.ByteLengthQueuingStrategy=Ir,r.CountQueuingStrategy=Ur,r.ReadableByteStreamController=ht,r.ReadableStream=He,r.ReadableStreamBYOBReader=Wt,r.ReadableStreamBYOBRequest=Lt,r.ReadableStreamDefaultController=St,r.ReadableStreamDefaultReader=Mt,r.TransformStream=Mr,r.TransformStreamDefaultController=Yt,r.WritableStream=Nt,r.WritableStreamDefaultController=gt,r.WritableStreamDefaultWriter=Qt,Object.defineProperty(r,"__esModule",{value:!0})}))});var co=it(()=>{if(!globalThis.ReadableStream)try{let r=require("node:process"),{emitWarning:t}=r;try{r.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),r.emitWarning=t}catch(n){throw r.emitWarning=t,n}}catch{Object.assign(globalThis,io())}try{let{Blob:r}=require("buffer");r&&!r.prototype.stream&&(r.prototype.stream=function(n){let s=0,i=this;return new ReadableStream({type:"bytes",async pull(c){let b=await i.slice(s,Math.min(i.size,s+65536)).arrayBuffer();s+=b.byteLength,c.enqueue(new Uint8Array(b)),s===i.size&&c.close()}})})}catch{}});async function*ua(r,t=!0){for(let n of r)if("stream"in n)yield*n.stream();else if(ArrayBuffer.isView(n))if(t){let s=n.byteOffset,i=n.byteOffset+n.byteLength;for(;s!==i;){let c=Math.min(i-s,uo),d=n.buffer.slice(s,s+c);s+=d.byteLength,yield new Uint8Array(d)}}else yield n;else{let s=0,i=n;for(;s!==i.size;){let d=await i.slice(s,Math.min(i.size,s+uo)).arrayBuffer();s+=d.byteLength,yield new Uint8Array(d)}}}var Jd,uo,lo,td,We,tr=Kt(()=>{Jd=re(co(),1);uo=65536;lo=class la{#t=[];#r="";#e=0;#s="transparent";constructor(t=[],n={}){if(typeof t!="object"||t===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof t[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof n!="object"&&typeof n!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");n===null&&(n={});let s=new TextEncoder;for(let c of t){let d;ArrayBuffer.isView(c)?d=new Uint8Array(c.buffer.slice(c.byteOffset,c.byteOffset+c.byteLength)):c instanceof ArrayBuffer?d=new Uint8Array(c.slice(0)):c instanceof la?d=c:d=s.encode(`${c}`),this.#e+=ArrayBuffer.isView(d)?d.byteLength:d.size,this.#t.push(d)}this.#s=`${n.endings===void 0?"transparent":n.endings}`;let i=n.type===void 0?"":String(n.type);this.#r=/^[\x20-\x7E]*$/.test(i)?i:""}get size(){return this.#e}get type(){return this.#r}async text(){let t=new TextDecoder,n="";for await(let s of ua(this.#t,!1))n+=t.decode(s,{stream:!0});return n+=t.decode(),n}async arrayBuffer(){let t=new Uint8Array(this.size),n=0;for await(let s of ua(this.#t,!1))t.set(s,n),n+=s.length;return t.buffer}stream(){let t=ua(this.#t,!0);return new globalThis.ReadableStream({type:"bytes",async pull(n){let s=await t.next();s.done?n.close():n.enqueue(s.value)},async cancel(){await t.return()}})}slice(t=0,n=this.size,s=""){let{size:i}=this,c=t<0?Math.max(i+t,0):Math.min(t,i),d=n<0?Math.max(i+n,0):Math.min(n,i),b=Math.max(d-c,0),p=this.#t,h=[],y=0;for(let E of p){if(y>=b)break;let k=ArrayBuffer.isView(E)?E.byteLength:E.size;if(c&&k<=c)c-=k,d-=k;else{let _;ArrayBuffer.isView(E)?(_=E.subarray(c,Math.min(k,d)),y+=_.byteLength):(_=E.slice(c,Math.min(k,d)),y+=_.size),d-=k,h.push(_),c=0}}let O=new la([],{type:String(s).toLowerCase()});return O.#e=b,O.#t=h,O}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](t){return t&&typeof t=="object"&&typeof t.constructor=="function"&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}};Object.defineProperties(lo.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});td=lo,We=td});var rd,nd,jt,da=Kt(()=>{tr();rd=class extends We{#t=0;#r="";constructor(t,n,s={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(t,s),s===null&&(s={});let i=s.lastModified===void 0?Date.now():Number(s.lastModified);Number.isNaN(i)||(this.#t=i),this.#r=String(n)}get name(){return this.#r}get lastModified(){return this.#t}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](t){return!!t&&t instanceof We&&/^(File)$/.test(t[Symbol.toStringTag])}},nd=rd,jt=nd});function mo(r,t=We){var n=`${fo()}${fo()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),s=[],i=`--${n}\r
Content-Disposition: form-data; name="`;return r.forEach((c,d)=>typeof c=="string"?s.push(i+fa(d)+`"\r
\r
${c.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):s.push(i+fa(d)+`"; filename="${fa(c.name,1)}"\r
Content-Type: ${c.type||"application/octet-stream"}\r
\r
`,c,`\r
`)),s.push(`--${n}--`),new t(s,{type:"multipart/form-data; boundary="+n})}var rr,ad,sd,fo,od,po,fa,ut,lt,en=Kt(()=>{tr();da();({toStringTag:rr,iterator:ad,hasInstance:sd}=Symbol),fo=Math.random,od="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),po=(r,t,n)=>(r+="",/^(Blob|File)$/.test(t&&t[rr])?[(n=n!==void 0?n+"":t[rr]=="File"?t.name:"blob",r),t.name!==n||t[rr]=="blob"?new jt([t],n,t):t]:[r,t+""]),fa=(r,t)=>(t?r:r.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),ut=(r,t,n)=>{if(t.length<n)throw new TypeError(`Failed to execute '${r}' on 'FormData': ${n} arguments required, but only ${t.length} present.`)},lt=class{#t=[];constructor(...t){if(t.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[rr](){return"FormData"}[ad](){return this.entries()}static[sd](t){return t&&typeof t=="object"&&t[rr]==="FormData"&&!od.some(n=>typeof t[n]!="function")}append(...t){ut("append",arguments,2),this.#t.push(po(...t))}delete(t){ut("delete",arguments,1),t+="",this.#t=this.#t.filter(([n])=>n!==t)}get(t){ut("get",arguments,1),t+="";for(var n=this.#t,s=n.length,i=0;i<s;i++)if(n[i][0]===t)return n[i][1];return null}getAll(t,n){return ut("getAll",arguments,1),n=[],t+="",this.#t.forEach(s=>s[0]===t&&n.push(s[1])),n}has(t){return ut("has",arguments,1),t+="",this.#t.some(n=>n[0]===t)}forEach(t,n){ut("forEach",arguments,1);for(var[s,i]of this)t.call(n,i,s,this)}set(...t){ut("set",arguments,2);var n=[],s=!0;t=po(...t),this.#t.forEach(i=>{i[0]===t[0]?s&&(s=!n.push(t)):n.push(i)}),s&&n.push(t),this.#t=n}*entries(){yield*this.#t}*keys(){for(var[t]of this)yield t}*values(){for(var[,t]of this)yield t}}});var So=it((of,go)=>{if(!globalThis.DOMException)try{let{MessageChannel:r}=require("worker_threads"),t=new r().port1,n=new ArrayBuffer;t.postMessage(n,[n,n])}catch(r){r.constructor.name==="DOMException"&&(globalThis.DOMException=r.constructor)}go.exports=globalThis.DOMException});var rn,id,lf,ma=Kt(()=>{rn=require("node:fs"),id=re(So(),1);da();tr();({stat:lf}=rn.promises)});var _o={};Wn(_o,{toFormData:()=>md});function pd(r){let t=r.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!t)return;let n=t[2]||t[3]||"",s=n.slice(n.lastIndexOf("\\")+1);return s=s.replace(/%22/g,'"'),s=s.replace(/&#(\d{4});/g,(i,c)=>String.fromCharCode(c)),s}async function md(r,t){if(!/multipart/i.test(t))throw new TypeError("Failed to fetch");let n=t.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!n)throw new TypeError("no or bad content-type header, no multipart boundary");let s=new ha(n[1]||n[2]),i,c,d,b,p,h,y=[],O=new lt,E=v=>{d+=P.decode(v,{stream:!0})},k=v=>{y.push(v)},_=()=>{let v=new jt(y,h,{type:p});O.append(b,v)},R=()=>{O.append(b,d)},P=new TextDecoder("utf-8");P.decode(),s.onPartBegin=function(){s.onPartData=E,s.onPartEnd=R,i="",c="",d="",b="",p="",h=null,y.length=0},s.onHeaderField=function(v){i+=P.decode(v,{stream:!0})},s.onHeaderValue=function(v){c+=P.decode(v,{stream:!0})},s.onHeaderEnd=function(){if(c+=P.decode(),i=i.toLowerCase(),i==="content-disposition"){let v=c.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);v&&(b=v[2]||v[3]||""),h=pd(c),h&&(s.onPartData=k,s.onPartEnd=_)}else i==="content-type"&&(p=c);c="",i=""};for await(let v of r)s.write(v);return s.end(),O}var De,H,wo,Xe,nn,an,cd,ar,ud,ld,dd,fd,dt,ha,Oo=Kt(()=>{ma();en();De=0,H={START_BOUNDARY:De++,HEADER_FIELD_START:De++,HEADER_FIELD:De++,HEADER_VALUE_START:De++,HEADER_VALUE:De++,HEADER_VALUE_ALMOST_DONE:De++,HEADERS_ALMOST_DONE:De++,PART_DATA_START:De++,PART_DATA:De++,END:De++},wo=1,Xe={PART_BOUNDARY:wo,LAST_BOUNDARY:wo*=2},nn=10,an=13,cd=32,ar=45,ud=58,ld=97,dd=122,fd=r=>r|32,dt=()=>{},ha=class{constructor(t){this.index=0,this.flags=0,this.onHeaderEnd=dt,this.onHeaderField=dt,this.onHeadersEnd=dt,this.onHeaderValue=dt,this.onPartBegin=dt,this.onPartData=dt,this.onPartEnd=dt,this.boundaryChars={},t=`\r
--`+t;let n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s),this.boundaryChars[n[s]]=!0;this.boundary=n,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=H.START_BOUNDARY}write(t){let n=0,s=t.length,i=this.index,{lookbehind:c,boundary:d,boundaryChars:b,index:p,state:h,flags:y}=this,O=this.boundary.length,E=O-1,k=t.length,_,R,P=$=>{this[$+"Mark"]=n},v=$=>{delete this[$+"Mark"]},W=($,F,U,ae)=>{(F===void 0||F!==U)&&this[$](ae&&ae.subarray(F,U))},B=($,F)=>{let U=$+"Mark";U in this&&(F?(W($,this[U],n,t),delete this[U]):(W($,this[U],t.length,t),this[U]=0))};for(n=0;n<s;n++)switch(_=t[n],h){case H.START_BOUNDARY:if(p===d.length-2){if(_===ar)y|=Xe.LAST_BOUNDARY;else if(_!==an)return;p++;break}else if(p-1===d.length-2){if(y&Xe.LAST_BOUNDARY&&_===ar)h=H.END,y=0;else if(!(y&Xe.LAST_BOUNDARY)&&_===nn)p=0,W("onPartBegin"),h=H.HEADER_FIELD_START;else return;break}_!==d[p+2]&&(p=-2),_===d[p+2]&&p++;break;case H.HEADER_FIELD_START:h=H.HEADER_FIELD,P("onHeaderField"),p=0;case H.HEADER_FIELD:if(_===an){v("onHeaderField"),h=H.HEADERS_ALMOST_DONE;break}if(p++,_===ar)break;if(_===ud){if(p===1)return;B("onHeaderField",!0),h=H.HEADER_VALUE_START;break}if(R=fd(_),R<ld||R>dd)return;break;case H.HEADER_VALUE_START:if(_===cd)break;P("onHeaderValue"),h=H.HEADER_VALUE;case H.HEADER_VALUE:_===an&&(B("onHeaderValue",!0),W("onHeaderEnd"),h=H.HEADER_VALUE_ALMOST_DONE);break;case H.HEADER_VALUE_ALMOST_DONE:if(_!==nn)return;h=H.HEADER_FIELD_START;break;case H.HEADERS_ALMOST_DONE:if(_!==nn)return;W("onHeadersEnd"),h=H.PART_DATA_START;break;case H.PART_DATA_START:h=H.PART_DATA,P("onPartData");case H.PART_DATA:if(i=p,p===0){for(n+=E;n<k&&!(t[n]in b);)n+=O;n-=E,_=t[n]}if(p<d.length)d[p]===_?(p===0&&B("onPartData",!0),p++):p=0;else if(p===d.length)p++,_===an?y|=Xe.PART_BOUNDARY:_===ar?y|=Xe.LAST_BOUNDARY:p=0;else if(p-1===d.length)if(y&Xe.PART_BOUNDARY){if(p=0,_===nn){y&=~Xe.PART_BOUNDARY,W("onPartEnd"),W("onPartBegin"),h=H.HEADER_FIELD_START;break}}else y&Xe.LAST_BOUNDARY&&_===ar?(W("onPartEnd"),h=H.END,y=0):p=0;if(p>0)c[p-1]=_;else if(i>0){let $=new Uint8Array(c.buffer,c.byteOffset,c.byteLength);W("onPartData",0,i,$),i=0,P("onPartData"),n--}break;case H.END:break;default:throw new Error(`Unexpected state entered: ${h}`)}B("onHeaderField"),B("onHeaderValue"),B("onPartData"),this.index=p,this.state=h,this.flags=y}end(){if(this.state===H.HEADER_FIELD_START&&this.index===0||this.state===H.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==H.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var xd={};Wn(xd,{default:()=>fi});module.exports=Dc(xd);var Oa=re(require("react")),S=require("@raycast/api");var L=re(require("react")),A=require("@raycast/api");var Cs=Object.prototype.hasOwnProperty;function Nr(r,t){var n,s;if(r===t)return!0;if(r&&t&&(n=r.constructor)===t.constructor){if(n===Date)return r.getTime()===t.getTime();if(n===RegExp)return r.toString()===t.toString();if(n===Array){if((s=r.length)===t.length)for(;s--&&Nr(r[s],t[s]););return s===-1}if(!n||typeof r=="object"){s=0;for(n in r)if(Cs.call(r,n)&&++s&&!Cs.call(t,n)||!(n in t)||!Nr(r[n],t[n]))return!1;return Object.keys(t).length===s}}return r!==r&&t!==t}var ct=re(require("node:fs")),Gr=re(require("node:path")),Ls=re(require("node:crypto")),Xn=re(require("node:child_process")),Bs=require("node:buffer"),$t=re(require("node:stream")),zs=require("node:util");var ea=require("react/jsx-runtime");var Fn=globalThis;function Lc(r){let t=(0,L.useRef)(r),n=(0,L.useRef)(0);return Nr(r,t.current)||(t.current=r,n.current+=1),(0,L.useMemo)(()=>t.current,[n.current])}function ke(r){let t=(0,L.useRef)(r);return t.current=r,t}function Bc(r,t){let n=r instanceof Error?r.message:String(r);return(0,A.showToast)({style:A.Toast.Style.Failure,title:t?.title??"Something went wrong",message:t?.message??n,primaryAction:t?.primaryAction??As(r),secondaryAction:t?.primaryAction?As(r):void 0})}var As=r=>{let t=!0,n="[Extension Name]...",s="";try{let d=JSON.parse((0,ct.readFileSync)((0,Gr.join)(A.environment.assetsPath,"..","package.json"),"utf8"));n=`[${d.title}]...`,s=`https://raycast.com/${d.owner||d.author}/${d.name}`,(!d.owner||d.access==="public")&&(t=!1)}catch{}let i=A.environment.isDevelopment||t,c=r instanceof Error?r?.stack||r?.message||"":String(r);return{title:i?"Copy Logs":"Report Error",onAction(d){d.hide(),i?A.Clipboard.copy(c):(0,A.open)(`https://github.com/raycast/extensions/issues/new?&labels=extension%2Cbug&template=extension_bug_report.yml&title=${encodeURIComponent(n)}&extension-url=${encodeURI(s)}&description=${encodeURIComponent(`#### Error:
\`\`\`
${c}
\`\`\`
`)}`)}}};function zc(r,t,n){let s=(0,L.useRef)(0),[i,c]=(0,L.useState)({isLoading:!0}),d=ke(r),b=ke(n?.abortable),p=ke(t||[]),h=ke(n?.onError),y=ke(n?.onData),O=ke(n?.onWillExecute),E=ke(n?.failureToastOptions),k=ke(i.data),_=(0,L.useRef)(null),R=(0,L.useRef)({page:0}),P=(0,L.useRef)(!1),v=(0,L.useRef)(!0),W=(0,L.useRef)(50),B=(0,L.useCallback)(()=>(b.current&&(b.current.current?.abort(),b.current.current=new AbortController),++s.current),[b]),$=(0,L.useCallback)((...Y)=>{let G=B();O.current?.(Y),c(q=>({...q,isLoading:!0}));let te=Wc(d.current)(...Y);function oe(q){return q.name=="AbortError"||G===s.current&&(h.current?h.current(q):A.environment.launchType!==A.LaunchType.Background&&Bc(q,{title:"Failed to fetch latest data",primaryAction:{title:"Retry",onAction(I){I.hide(),_.current?.(...p.current||[])}},...E.current}),c({error:q,isLoading:!1})),q}return typeof te=="function"?(P.current=!0,te(R.current).then(({data:q,hasMore:I,cursor:K})=>(G===s.current&&(R.current&&(R.current.cursor=K,R.current.lastItem=q?.[q.length-1]),y.current&&y.current(q,R.current),I&&(W.current=q.length),v.current=I,c(Z=>R.current.page===0?{data:q,isLoading:!1}:{data:(Z.data||[])?.concat(q),isLoading:!1})),q),q=>(v.current=!1,oe(q)))):(P.current=!1,te.then(q=>(G===s.current&&(y.current&&y.current(q),c({data:q,isLoading:!1})),q),oe))},[y,h,p,d,c,_,O,R,E,B]);_.current=$;let F=(0,L.useCallback)(()=>{R.current={page:0};let Y=p.current||[];return $(...Y)},[$,p]),U=(0,L.useCallback)(async(Y,G)=>{let te;try{if(G?.optimisticUpdate){B(),typeof G?.rollbackOnError!="function"&&G?.rollbackOnError!==!1&&(te=structuredClone(k.current?.value));let oe=G.optimisticUpdate;c(q=>({...q,data:oe(q.data)}))}return await Y}catch(oe){if(typeof G?.rollbackOnError=="function"){let q=G.rollbackOnError;c(I=>({...I,data:q(I.data)}))}else G?.optimisticUpdate&&G?.rollbackOnError!==!1&&c(q=>({...q,data:te}));throw oe}finally{G?.shouldRevalidateAfter!==!1&&(A.environment.launchType===A.LaunchType.Background||A.environment.commandMode==="menu-bar"?await F():F())}},[F,k,c,B]),ae=(0,L.useCallback)(()=>{R.current.page+=1;let Y=p.current||[];$(...Y)},[R,p,$]);(0,L.useEffect)(()=>{R.current={page:0},n?.execute!==!1?$(...t||[]):B()},[Lc([t,n?.execute,$]),b,R]),(0,L.useEffect)(()=>()=>{B()},[B]);let ee=n?.execute!==!1?i.isLoading:!1,Ae={...i,isLoading:ee},Ie=P.current?{pageSize:W.current,hasMore:v.current,onLoadMore:ae}:void 0;return{...Ae,revalidate:F,mutate:U,pagination:Ie}}function Wc(r){return r===Promise.all||r===Promise.race||r===Promise.resolve||r===Promise.reject?r.bind(Promise):r}function Is(r){return typeof r!="function"?!1:/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(r))!==null}function Fc(r){return r instanceof URLSearchParams?r.toString():r}function Ws(r,t=[]){function n(s){return"update"in r?r.update(s,"utf8"):r.write(s)}return{dispatch:function(s){s=Fc(s),s===null?this._null():this["_"+typeof s](s)},_object:function(s){let i=/\[object (.*)\]/i,c=Object.prototype.toString.call(s),d=i.exec(c)?.[1]??"unknown:["+c+"]";d=d.toLowerCase();let b=null;if((b=t.indexOf(s))>=0){this.dispatch("[CIRCULAR:"+b+"]");return}else t.push(s);if(Buffer.isBuffer(s))return n("buffer:"),n(s.toString("utf8"));if(d!=="object"&&d!=="function"&&d!=="asyncfunction")if(this["_"+d])this["_"+d](s);else throw new Error('Unknown object type "'+d+'"');else{let p=Object.keys(s);p=p.sort(),Is(s)||p.splice(0,0,"prototype","__proto__","constructor"),n("object:"+p.length+":");let h=this;return p.forEach(function(y){h.dispatch(y),n(":"),h.dispatch(s[y]),n(",")})}},_array:function(s,i){i=typeof i<"u"?i:!1;let c=this;if(n("array:"+s.length+":"),!i||s.length<=1){s.forEach(function(p){c.dispatch(p)});return}let d=[],b=s.map(function(p){let h=Nc(),y=t.slice();return Ws(h,y).dispatch(p),d=d.concat(y.slice(t.length)),h.read().toString()});t=t.concat(d),b.sort(),this._array(b,!1)},_date:function(s){n("date:"+s.toJSON())},_symbol:function(s){n("symbol:"+s.toString())},_error:function(s){n("error:"+s.toString())},_boolean:function(s){n("bool:"+s.toString())},_string:function(s){n("string:"+s.length+":"),n(s.toString())},_function:function(s){n("fn:"),Is(s)?this.dispatch("[native]"):this.dispatch(s.toString()),this.dispatch("function-name:"+String(s.name)),this._object(s)},_number:function(s){n("number:"+s.toString())},_xml:function(s){n("xml:"+s.toString())},_null:function(){n("Null")},_undefined:function(){n("Undefined")},_regexp:function(s){n("regex:"+s.toString())},_uint8array:function(s){n("uint8array:"),this.dispatch(Array.prototype.slice.call(s))},_uint8clampedarray:function(s){n("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(s))},_int8array:function(s){n("int8array:"),this.dispatch(Array.prototype.slice.call(s))},_uint16array:function(s){n("uint16array:"),this.dispatch(Array.prototype.slice.call(s))},_int16array:function(s){n("int16array:"),this.dispatch(Array.prototype.slice.call(s))},_uint32array:function(s){n("uint32array:"),this.dispatch(Array.prototype.slice.call(s))},_int32array:function(s){n("int32array:"),this.dispatch(Array.prototype.slice.call(s))},_float32array:function(s){n("float32array:"),this.dispatch(Array.prototype.slice.call(s))},_float64array:function(s){n("float64array:"),this.dispatch(Array.prototype.slice.call(s))},_arraybuffer:function(s){n("arraybuffer:"),this.dispatch(new Uint8Array(s))},_url:function(s){n("url:"+s.toString())},_map:function(s){n("map:");let i=Array.from(s);this._array(i,!0)},_set:function(s){n("set:");let i=Array.from(s);this._array(i,!0)},_file:function(s){n("file:"),this.dispatch([s.name,s.size,s.type,s.lastModified])},_blob:function(){throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){n("domwindow")},_bigint:function(s){n("bigint:"+s.toString())},_process:function(){n("process")},_timer:function(){n("timer")},_pipe:function(){n("pipe")},_tcp:function(){n("tcp")},_udp:function(){n("udp")},_tty:function(){n("tty")},_statwatcher:function(){n("statwatcher")},_securecontext:function(){n("securecontext")},_connection:function(){n("connection")},_zlib:function(){n("zlib")},_context:function(){n("context")},_nodescript:function(){n("nodescript")},_httpparser:function(){n("httpparser")},_dataview:function(){n("dataview")},_signal:function(){n("signal")},_fsevent:function(){n("fsevent")},_tlswrap:function(){n("tlswrap")}}}function Nc(){return{buf:"",write:function(r){this.buf+=r},end:function(r){this.buf+=r},read:function(){return this.buf}}}function Qc(r,t){let n=this[r];return n instanceof Date?`__raycast_cached_date__${n.toISOString()}`:Buffer.isBuffer(n)?`__raycast_cached_buffer__${n.toString("base64")}`:t}function Vc(r,t){return typeof t=="string"&&t.startsWith("__raycast_cached_date__")?new Date(t.replace("__raycast_cached_date__","")):typeof t=="string"&&t.startsWith("__raycast_cached_buffer__")?Buffer.from(t.replace("__raycast_cached_buffer__",""),"base64"):t}function Us(r){let t=Ls.default.createHash("sha1");return Ws(t).dispatch(r),t.digest("hex")}var Jc=Symbol("cache without namespace"),Ms=new Map;function ta(r,t,n){let s=n?.cacheNamespace||Jc,i=Ms.get(s)||Ms.set(s,new A.Cache({namespace:n?.cacheNamespace})).get(s);if(!i)throw new Error("Missing cache");let c=ke(r),d=ke(t),b=(0,L.useSyncExternalStore)(i.subscribe,()=>{try{return i.get(c.current)}catch(O){console.error("Could not get Cache data:",O);return}}),p=(0,L.useMemo)(()=>{if(typeof b<"u"){if(b==="undefined")return;try{return JSON.parse(b,Vc)}catch(O){return console.warn("The cached data is corrupted",O),d.current}}else return d.current},[b,d]),h=ke(p),y=(0,L.useCallback)(O=>{let E=typeof O=="function"?O(h.current):O;if(typeof E>"u")i.set(c.current,"undefined");else{let k=JSON.stringify(E,Qc);i.set(c.current,k)}return E},[i,c,h]);return[p,y]}var Rt=Symbol();function Ee(r,t,n){let{initialData:s,keepPreviousData:i,internal_cacheKeySuffix:c,...d}=n||{},b=(0,L.useRef)(null),[p,h]=ta(Us(t||[])+c,Rt,{cacheNamespace:Us(r)}),y=(0,L.useRef)(p!==Rt?p:s),O=(0,L.useRef)(void 0),{mutate:E,revalidate:k,..._}=zc(r,t||[],{...d,onData(B,$){O.current=$,d.onData&&d.onData(B,$),!($&&$.page>0)&&(b.current="promise",y.current=B,h(B))}}),R,P=_.pagination;O.current&&O.current.page>0&&_.data?R=_.data:b.current==="promise"?R=y.current:i&&p!==Rt?(R=p,P&&(P.hasMore=!0,P.pageSize=p.length)):i&&p===Rt?R=y.current:p!==Rt?(R=p,P&&(P.hasMore=!0,P.pageSize=p.length)):R=s;let v=ke(R),W=(0,L.useCallback)(async(B,$)=>{let F;try{if($?.optimisticUpdate){typeof $?.rollbackOnError!="function"&&$?.rollbackOnError!==!1&&(F=structuredClone(v.current));let U=$.optimisticUpdate(v.current);b.current="cache",y.current=U,h(U)}return await E(B,{shouldRevalidateAfter:$?.shouldRevalidateAfter})}catch(U){if(typeof $?.rollbackOnError=="function"){let ae=$.rollbackOnError(v.current);b.current="cache",y.current=ae,h(ae)}else $?.optimisticUpdate&&$?.rollbackOnError!==!1&&(b.current="cache",y.current=F,h(F));throw U}},[h,E,v,y,b]);return(0,L.useEffect)(()=>{p!==Rt&&(b.current="cache",y.current=p)},[p]),{data:R,isLoading:_.isLoading,error:_.error,mutate:O.current&&O.current.page>0?E:W,pagination:P,revalidate:k}}var Vr=r=>!!r&&typeof r=="object"&&typeof r.removeListener=="function"&&typeof r.emit=="function"&&typeof r.reallyExit=="function"&&typeof r.listeners=="function"&&typeof r.kill=="function"&&typeof r.pid=="number"&&typeof r.on=="function",Nn=Symbol.for("signal-exit emitter"),Gn=class{constructor(){if(this.emitted={afterExit:!1,exit:!1},this.listeners={afterExit:[],exit:[]},this.count=0,this.id=Math.random(),Fn[Nn])return Fn[Nn];Object.defineProperty(Fn,Nn,{value:this,writable:!1,enumerable:!1,configurable:!1})}on(t,n){this.listeners[t].push(n)}removeListener(t,n){let s=this.listeners[t],i=s.indexOf(n);i!==-1&&(i===0&&s.length===1?s.length=0:s.splice(i,1))}emit(t,n,s){if(this.emitted[t])return!1;this.emitted[t]=!0;let i=!1;for(let c of this.listeners[t])i=c(n,s)===!0||i;return t==="exit"&&(i=this.emit("afterExit",n,s)||i),i}},Yn=class{onExit(){return()=>{}}load(){}unload(){}},Kn=class{#t;#r;#e;#s;#i;#o;#a;#n;constructor(t){this.#t=process.platform==="win32"?"SIGINT":"SIGHUP",this.#r=new Gn,this.#o={},this.#a=!1,this.#n=[],this.#n.push("SIGHUP","SIGINT","SIGTERM"),globalThis.process.platform!=="win32"&&this.#n.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),globalThis.process.platform==="linux"&&this.#n.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT"),this.#e=t,this.#o={};for(let n of this.#n)this.#o[n]=()=>{let s=this.#e.listeners(n),{count:i}=this.#r,c=t;if(typeof c.__signal_exit_emitter__=="object"&&typeof c.__signal_exit_emitter__.count=="number"&&(i+=c.__signal_exit_emitter__.count),s.length===i){this.unload();let d=this.#r.emit("exit",null,n),b=n==="SIGHUP"?this.#t:n;d||t.kill(t.pid,b)}};this.#i=t.reallyExit,this.#s=t.emit}onExit(t,n){if(!Vr(this.#e))return()=>{};this.#a===!1&&this.load();let s=n?.alwaysLast?"afterExit":"exit";return this.#r.on(s,t),()=>{this.#r.removeListener(s,t),this.#r.listeners.exit.length===0&&this.#r.listeners.afterExit.length===0&&this.unload()}}load(){if(!this.#a){this.#a=!0,this.#r.count+=1;for(let t of this.#n)try{let n=this.#o[t];n&&this.#e.on(t,n)}catch{}this.#e.emit=(t,...n)=>this.#u(t,...n),this.#e.reallyExit=t=>this.#c(t)}}unload(){this.#a&&(this.#a=!1,this.#n.forEach(t=>{let n=this.#o[t];if(!n)throw new Error("Listener not defined for signal: "+t);try{this.#e.removeListener(t,n)}catch{}}),this.#e.emit=this.#s,this.#e.reallyExit=this.#i,this.#r.count-=1)}#c(t){return Vr(this.#e)?(this.#e.exitCode=t||0,this.#r.emit("exit",this.#e.exitCode,null),this.#i.call(this.#e,this.#e.exitCode)):0}#u(t,...n){let s=this.#s;if(t==="exit"&&Vr(this.#e)){typeof n[0]=="number"&&(this.#e.exitCode=n[0]);let i=s.call(this.#e,t,...n);return this.#r.emit("exit",this.#e.exitCode,null),i}else return s.call(this.#e,t,...n)}},Qn=null,Hc=(r,t)=>(Qn||(Qn=Vr(process)?new Kn(process):new Yn),Qn.onExit(r,t));function Fs(r,{timeout:t}={}){let n=new Promise((b,p)=>{r.on("exit",(h,y)=>{b({exitCode:h,signal:y,timedOut:!1})}),r.on("error",h=>{p(h)}),r.stdin&&r.stdin.on("error",h=>{p(h)})}),s=Hc(()=>{r.kill()});if(t===0||t===void 0)return n.finally(()=>s());let i,c=new Promise((b,p)=>{i=setTimeout(()=>{r.kill("SIGTERM"),p(Object.assign(new Error("Timed out"),{timedOut:!0,signal:"SIGTERM"}))},t)}),d=n.finally(()=>{clearTimeout(i)});return Promise.race([c,d]).finally(()=>s())}var Zn=class extends Error{constructor(){super("The output is too big"),this.name="MaxBufferError"}};function Gc(r){let{encoding:t}=r,n=t==="buffer",s=new $t.default.PassThrough({objectMode:!1});t&&t!=="buffer"&&s.setEncoding(t);let i=0,c=[];return s.on("data",d=>{c.push(d),i+=d.length}),s.getBufferedValue=()=>n?Buffer.concat(c,i):c.join(""),s.getBufferedLength=()=>i,s}async function qs(r,t){let n=Gc(t);return await new Promise((s,i)=>{let c=d=>{d&&n.getBufferedLength()<=Bs.constants.MAX_LENGTH&&(d.bufferedData=n.getBufferedValue()),i(d)};(async()=>{try{await(0,zs.promisify)($t.default.pipeline)(r,n),s()}catch(d){c(d)}})(),n.on("data",()=>{n.getBufferedLength()>8e7&&c(new Zn)})}),n.getBufferedValue()}async function Ds(r,t){r.destroy();try{return await t}catch(n){return n.bufferedData}}async function Ns({stdout:r,stderr:t},{encoding:n},s){let i=qs(r,{encoding:n}),c=qs(t,{encoding:n});try{return await Promise.all([s,i,c])}catch(d){return Promise.all([{error:d,exitCode:null,signal:d.signal,timedOut:d.timedOut||!1},Ds(r,i),Ds(t,c)])}}function Yc(r){let t=typeof r=="string"?`
`:10,n=typeof r=="string"?"\r":13;return r[r.length-1]===t&&(r=r.slice(0,-1)),r[r.length-1]===n&&(r=r.slice(0,-1)),r}function Jr(r,t){return r.stripFinalNewline?Yc(t):t}function Kc({timedOut:r,timeout:t,signal:n,exitCode:s}){return r?`timed out after ${t} milliseconds`:n!=null?`was killed with ${n}`:s!=null?`failed with exit code ${s}`:"failed"}function Zc({stdout:r,stderr:t,error:n,signal:s,exitCode:i,command:c,timedOut:d,options:b,parentError:p}){let y=`Command ${Kc({timedOut:d,timeout:b?.timeout,signal:s,exitCode:i})}: ${c}`,O=n?`${y}
${n.message}`:y,E=[O,t,r].filter(Boolean).join(`
`);return n?n.originalMessage=n.message:n=p,n.message=E,n.shortMessage=O,n.command=c,n.exitCode=i,n.signal=s,n.stdout=r,n.stderr=t,"bufferedData"in n&&delete n.bufferedData,n}function Qs({stdout:r,stderr:t,error:n,exitCode:s,signal:i,timedOut:c,command:d,options:b,parentError:p}){if(n||s!==0||i!==null)throw Zc({error:n,exitCode:s,signal:i,stdout:r,stderr:t,command:d,timedOut:c,options:b,parentError:p});return r}var Qr={asana:"1191201745684312",github:"7235fe8d42157f1f38c0",linear:"c8ff37b9225c3c9aefd7d66ea0e5b6f1",slack:"851756884692.5546927290212"},Hr=class r{constructor(t){this.clientId=t.clientId,this.scope=Array.isArray(t.scope)?t.scope.join(" "):t.scope,this.personalAccessToken=t.personalAccessToken,this.bodyEncoding=t.bodyEncoding,this.client=t.client,this.extraParameters=t.extraParameters,this.authorizeUrl=t.authorizeUrl,this.tokenUrl=t.tokenUrl,this.refreshTokenUrl=t.refreshTokenUrl,this.onAuthorize=t.onAuthorize,this.tokenResponseParser=t.tokenResponseParser??(n=>n),this.tokenRefreshResponseParser=t.tokenRefreshResponseParser??(n=>n),this.authorize=this.authorize.bind(this)}static asana(t){return new r({client:new A.OAuth.PKCEClient({redirectMethod:A.OAuth.RedirectMethod.Web,providerName:"Asana",providerIcon:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="251" height="232" fill="none"><path fill="#F06A6A" d="M179.383 54.373c0 30.017-24.337 54.374-54.354 54.374-30.035 0-54.373-24.338-54.373-54.374C70.656 24.338 94.993 0 125.029 0c30.017 0 54.354 24.338 54.354 54.373ZM54.393 122.33C24.376 122.33.02 146.668.02 176.685c0 30.017 24.337 54.373 54.373 54.373 30.035 0 54.373-24.338 54.373-54.373 0-30.017-24.338-54.355-54.373-54.355Zm141.253 0c-30.035 0-54.373 24.338-54.373 54.374 0 30.035 24.338 54.373 54.373 54.373 30.017 0 54.374-24.338 54.374-54.373 0-30.036-24.338-54.374-54.374-54.374Z"/></svg>')}`,providerId:"asana",description:"Connect your Asana account"}),clientId:t.clientId??Qr.asana,authorizeUrl:t.authorizeUrl??"https://asana.oauth.raycast.com/authorize",tokenUrl:t.tokenUrl??"https://asana.oauth.raycast.com/token",refreshTokenUrl:t.refreshTokenUrl??"https://asana.oauth.raycast.com/refresh-token",scope:t.scope,personalAccessToken:t.personalAccessToken,onAuthorize:t.onAuthorize,bodyEncoding:t.bodyEncoding,tokenRefreshResponseParser:t.tokenRefreshResponseParser,tokenResponseParser:t.tokenResponseParser})}static github(t){return new r({client:new A.OAuth.PKCEClient({redirectMethod:A.OAuth.RedirectMethod.Web,providerName:"GitHub",providerIcon:{source:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>')}`,tintColor:A.Color.PrimaryText},providerId:"github",description:"Connect your GitHub account"}),clientId:t.clientId??Qr.github,authorizeUrl:t.authorizeUrl??"https://github.oauth.raycast.com/authorize",tokenUrl:t.tokenUrl??"https://github.oauth.raycast.com/token",refreshTokenUrl:t.refreshTokenUrl??"https://github.oauth.raycast.com/refresh-token",scope:t.scope,personalAccessToken:t.personalAccessToken,onAuthorize:t.onAuthorize,bodyEncoding:t.bodyEncoding,tokenRefreshResponseParser:t.tokenRefreshResponseParser,tokenResponseParser:t.tokenResponseParser})}static google(t){return new r({client:new A.OAuth.PKCEClient({redirectMethod:A.OAuth.RedirectMethod.AppURI,providerName:"Google",providerIcon:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" style="display:block" viewBox="0 0 48 48"><path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"/><path fill="#4285F4" d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"/><path fill="#FBBC05" d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"/><path fill="#34A853" d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"/><path fill="none" d="M0 0h48v48H0z"/></svg>')}`,providerId:"google",description:"Connect your Google account"}),clientId:t.clientId,authorizeUrl:t.authorizeUrl??"https://accounts.google.com/o/oauth2/v2/auth",tokenUrl:t.tokenUrl??"https://oauth2.googleapis.com/token",refreshTokenUrl:t.tokenUrl,scope:t.scope,personalAccessToken:t.personalAccessToken,bodyEncoding:t.bodyEncoding??"url-encoded",onAuthorize:t.onAuthorize,tokenRefreshResponseParser:t.tokenRefreshResponseParser,tokenResponseParser:t.tokenResponseParser})}static jira(t){return new r({client:new A.OAuth.PKCEClient({redirectMethod:A.OAuth.RedirectMethod.Web,providerName:"Jira",providerIcon:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="2361" height="2500" viewBox="2.59 0 214.091 224"><linearGradient id="a" x1="102.4" x2="56.15" y1="218.63" y2="172.39" gradientTransform="matrix(1 0 0 -1 0 264)" gradientUnits="userSpaceOnUse"><stop offset=".18" stop-color="#0052cc"/><stop offset="1" stop-color="#2684ff"/></linearGradient><linearGradient xlink:href="#a" id="b" x1="114.65" x2="160.81" y1="85.77" y2="131.92"/><path fill="#2684ff" d="M214.06 105.73 117.67 9.34 108.33 0 35.77 72.56 2.59 105.73a8.89 8.89 0 0 0 0 12.54l66.29 66.29L108.33 224l72.55-72.56 1.13-1.12 32.05-32a8.87 8.87 0 0 0 0-12.59zm-105.73 39.39L75.21 112l33.12-33.12L141.44 112z"/><path fill="url(#a)" d="M108.33 78.88a55.75 55.75 0 0 1-.24-78.61L35.62 72.71l39.44 39.44z"/><path fill="url(#b)" d="m141.53 111.91-33.2 33.21a55.77 55.77 0 0 1 0 78.86L181 151.35z"/></svg>')}`,providerId:"jira",description:"Connect your Jira account"}),clientId:t.clientId,authorizeUrl:t.authorizeUrl??"https://auth.atlassian.com/authorize",tokenUrl:t.tokenUrl??"https://auth.atlassian.com/oauth/token",refreshTokenUrl:t.refreshTokenUrl,scope:t.scope,personalAccessToken:t.personalAccessToken,onAuthorize:t.onAuthorize,bodyEncoding:t.bodyEncoding,tokenRefreshResponseParser:t.tokenRefreshResponseParser,tokenResponseParser:t.tokenResponseParser})}static linear(t){return new r({client:new A.OAuth.PKCEClient({redirectMethod:A.OAuth.RedirectMethod.Web,providerName:"Linear",providerIcon:{source:{light:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" fill="#222326" width="200" height="200" viewBox="0 0 100 100"><path d="M1.22541 61.5228c-.2225-.9485.90748-1.5459 1.59638-.857L39.3342 97.1782c.6889.6889.0915 1.8189-.857 1.5964C20.0515 94.4522 5.54779 79.9485 1.22541 61.5228ZM.00189135 46.8891c-.01764375.2833.08887215.5599.28957165.7606L52.3503 99.7085c.2007.2007.4773.3075.7606.2896 2.3692-.1476 4.6938-.46 6.9624-.9259.7645-.157 1.0301-1.0963.4782-1.6481L2.57595 39.4485c-.55186-.5519-1.49117-.2863-1.648174.4782-.465915 2.2686-.77832 4.5932-.92588465 6.9624ZM4.21093 29.7054c-.16649.3738-.08169.8106.20765 1.1l64.77602 64.776c.2894.2894.7262.3742 1.1.2077 1.7861-.7956 3.5171-1.6927 5.1855-2.684.5521-.328.6373-1.0867.1832-1.5407L8.43566 24.3367c-.45409-.4541-1.21271-.3689-1.54074.1832-.99132 1.6684-1.88843 3.3994-2.68399 5.1855ZM12.6587 18.074c-.3701-.3701-.393-.9637-.0443-1.3541C21.7795 6.45931 35.1114 0 49.9519 0 77.5927 0 100 22.4073 100 50.0481c0 14.8405-6.4593 28.1724-16.7199 37.3375-.3903.3487-.984.3258-1.3542-.0443L12.6587 18.074Z"/></svg>')}`,dark:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" fill="#fff" width="200" height="200" viewBox="0 0 100 100"><path d="M1.22541 61.5228c-.2225-.9485.90748-1.5459 1.59638-.857L39.3342 97.1782c.6889.6889.0915 1.8189-.857 1.5964C20.0515 94.4522 5.54779 79.9485 1.22541 61.5228ZM.00189135 46.8891c-.01764375.2833.08887215.5599.28957165.7606L52.3503 99.7085c.2007.2007.4773.3075.7606.2896 2.3692-.1476 4.6938-.46 6.9624-.9259.7645-.157 1.0301-1.0963.4782-1.6481L2.57595 39.4485c-.55186-.5519-1.49117-.2863-1.648174.4782-.465915 2.2686-.77832 4.5932-.92588465 6.9624ZM4.21093 29.7054c-.16649.3738-.08169.8106.20765 1.1l64.77602 64.776c.2894.2894.7262.3742 1.1.2077 1.7861-.7956 3.5171-1.6927 5.1855-2.684.5521-.328.6373-1.0867.1832-1.5407L8.43566 24.3367c-.45409-.4541-1.21271-.3689-1.54074.1832-.99132 1.6684-1.88843 3.3994-2.68399 5.1855ZM12.6587 18.074c-.3701-.3701-.393-.9637-.0443-1.3541C21.7795 6.45931 35.1114 0 49.9519 0 77.5927 0 100 22.4073 100 50.0481c0 14.8405-6.4593 28.1724-16.7199 37.3375-.3903.3487-.984.3258-1.3542-.0443L12.6587 18.074Z" /></svg>')}`}},providerId:"linear",description:"Connect your Linear account"}),clientId:t.clientId??Qr.linear,authorizeUrl:t.authorizeUrl??"https://linear.oauth.raycast.com/authorize",tokenUrl:t.tokenUrl??"https://linear.oauth.raycast.com/token",refreshTokenUrl:t.refreshTokenUrl??"https://linear.oauth.raycast.com/refresh-token",scope:t.scope,extraParameters:{actor:"user"},onAuthorize:t.onAuthorize,bodyEncoding:t.bodyEncoding,tokenRefreshResponseParser:t.tokenRefreshResponseParser,tokenResponseParser:t.tokenResponseParser})}static slack(t){return new r({client:new A.OAuth.PKCEClient({redirectMethod:A.OAuth.RedirectMethod.Web,providerName:"Slack",providerIcon:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="73 73 124 124"><style>.st0{fill:#e01e5a}.st1{fill:#36c5f0}.st2{fill:#2eb67d}.st3{fill:#ecb22e}</style><path d="M99.4 151.2c0 7.1-5.8 12.9-12.9 12.9-7.1 0-12.9-5.8-12.9-12.9 0-7.1 5.8-12.9 12.9-12.9h12.9v12.9zM105.9 151.2c0-7.1 5.8-12.9 12.9-12.9s12.9 5.8 12.9 12.9v32.3c0 7.1-5.8 12.9-12.9 12.9s-12.9-5.8-12.9-12.9v-32.3z" class="st0"/><path d="M118.8 99.4c-7.1 0-12.9-5.8-12.9-12.9 0-7.1 5.8-12.9 12.9-12.9s12.9 5.8 12.9 12.9v12.9h-12.9zM118.8 105.9c7.1 0 12.9 5.8 12.9 12.9s-5.8 12.9-12.9 12.9H86.5c-7.1 0-12.9-5.8-12.9-12.9s5.8-12.9 12.9-12.9h32.3z" class="st1"/><path d="M170.6 118.8c0-7.1 5.8-12.9 12.9-12.9 7.1 0 12.9 5.8 12.9 12.9s-5.8 12.9-12.9 12.9h-12.9v-12.9zM164.1 118.8c0 7.1-5.8 12.9-12.9 12.9-7.1 0-12.9-5.8-12.9-12.9V86.5c0-7.1 5.8-12.9 12.9-12.9 7.1 0 12.9 5.8 12.9 12.9v32.3z" class="st2"/><path d="M151.2 170.6c7.1 0 12.9 5.8 12.9 12.9 0 7.1-5.8 12.9-12.9 12.9-7.1 0-12.9-5.8-12.9-12.9v-12.9h12.9zM151.2 164.1c-7.1 0-12.9-5.8-12.9-12.9 0-7.1 5.8-12.9 12.9-12.9h32.3c7.1 0 12.9 5.8 12.9 12.9 0 7.1-5.8 12.9-12.9 12.9h-32.3z" class="st3"/></svg>')}`,providerId:"slack",description:"Connect your Slack account"}),clientId:t.clientId??Qr.slack,authorizeUrl:t.authorizeUrl??"https://slack.oauth.raycast.com/authorize",tokenUrl:t.tokenUrl??"https://slack.oauth.raycast.com/token",refreshTokenUrl:t.tokenUrl??"https://slack.oauth.raycast.com/refresh-token",scope:"",extraParameters:{user_scope:t.scope},personalAccessToken:t.personalAccessToken,bodyEncoding:t.tokenUrl?t.bodyEncoding??"url-encoded":"json",onAuthorize:t.onAuthorize,tokenRefreshResponseParser:t.tokenRefreshResponseParser,tokenResponseParser:t.tokenResponseParser??(n=>({access_token:n.authed_user.access_token,scope:n.authed_user.scope}))})}static zoom(t){return new r({client:new A.OAuth.PKCEClient({redirectMethod:A.OAuth.RedirectMethod.Web,providerName:"Zoom",providerIcon:`data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 351.845 80"><path d="M73.786 78.835H10.88A10.842 10.842 0 0 1 .833 72.122a10.841 10.841 0 0 1 2.357-11.85L46.764 16.7h-31.23C6.954 16.699 0 9.744 0 1.165h58.014c4.414 0 8.357 2.634 10.046 6.712a10.843 10.843 0 0 1-2.356 11.85L22.13 63.302h36.122c8.58 0 15.534 6.955 15.534 15.534Zm278.059-48.544C351.845 13.588 338.256 0 321.553 0c-8.934 0-16.975 3.89-22.524 10.063C293.48 3.89 285.44 0 276.505 0c-16.703 0-30.291 13.588-30.291 30.291v48.544c8.579 0 15.534-6.955 15.534-15.534v-33.01c0-8.137 6.62-14.757 14.757-14.757s14.757 6.62 14.757 14.757v33.01c0 8.58 6.955 15.534 15.534 15.534V30.291c0-8.137 6.62-14.757 14.757-14.757s14.758 6.62 14.758 14.757v33.01c0 8.58 6.954 15.534 15.534 15.534V30.291ZM238.447 40c0 22.091-17.909 40-40 40s-40-17.909-40-40 17.908-40 40-40 40 17.909 40 40Zm-15.534 0c0-13.512-10.954-24.466-24.466-24.466S173.98 26.488 173.98 40s10.953 24.466 24.466 24.466S222.913 53.512 222.913 40Zm-70.68 0c0 22.091-17.909 40-40 40s-40-17.909-40-40 17.909-40 40-40 40 17.909 40 40Zm-15.534 0c0-13.512-10.954-24.466-24.466-24.466S87.767 26.488 87.767 40s10.954 24.466 24.466 24.466S136.699 53.512 136.699 40Z" style="fill:#0b5cff"/></svg>')}`,providerId:"zoom",description:"Connect your Zoom account"}),clientId:t.clientId,authorizeUrl:t.authorizeUrl??"https://zoom.us/oauth/authorize",tokenUrl:t.tokenUrl??"https://zoom.us/oauth/token",refreshTokenUrl:t.refreshTokenUrl,scope:t.scope,personalAccessToken:t.personalAccessToken,bodyEncoding:t.bodyEncoding??"url-encoded",onAuthorize:t.onAuthorize,tokenRefreshResponseParser:t.tokenRefreshResponseParser,tokenResponseParser:t.tokenResponseParser})}async authorize(){let t=await this.client.getTokens();if(t?.accessToken){if(t.refreshToken&&t.isExpired()){let c=await this.refreshTokens({token:t.refreshToken});if(c)return await this.client.setTokens(c),c.access_token}return t.accessToken}let n=await this.client.authorizationRequest({endpoint:this.authorizeUrl,clientId:this.clientId,scope:this.scope,extraParameters:this.extraParameters}),{authorizationCode:s}=await this.client.authorize(n),i=await this.fetchTokens({authRequest:n,authorizationCode:s});return await this.client.setTokens(i),i.access_token}async fetchTokens({authRequest:t,authorizationCode:n}){let s;if(this.bodyEncoding==="url-encoded"){let d=new URLSearchParams;d.append("client_id",this.clientId),d.append("code",n),d.append("code_verifier",t.codeVerifier),d.append("grant_type","authorization_code"),d.append("redirect_uri",t.redirectURI),s={body:d}}else s={body:JSON.stringify({client_id:this.clientId,code:n,code_verifier:t.codeVerifier,grant_type:"authorization_code",redirect_uri:t.redirectURI}),headers:{"Content-Type":"application/json"}};let i=await fetch(this.tokenUrl,{method:"POST",...s});if(!i.ok){let d=await i.text();throw console.error("fetch tokens error:",d),new Error(`Error while fetching tokens: ${i.status} (${i.statusText})
${d}`)}let c=this.tokenResponseParser(await i.json());return Array.isArray(c.scope)?{...c,scope:c.scope.join(" ")}:c}async refreshTokens({token:t}){let n;if(this.bodyEncoding==="url-encoded"){let i=new URLSearchParams;i.append("client_id",this.clientId),i.append("refresh_token",t),i.append("grant_type","refresh_token"),n={body:i}}else n={body:JSON.stringify({client_id:this.clientId,refresh_token:t,grant_type:"refresh_token"}),headers:{"Content-Type":"application/json"}};let s=await fetch(this.refreshTokenUrl??this.tokenUrl,{method:"POST",...n});if(s.ok){let i=this.tokenRefreshResponseParser(await s.json());return i.refresh_token=i.refresh_token??t,i}else{let i=await s.text();console.error("refresh tokens error:",i),this.client.description=`${this.client.providerName} needs you to sign-in again. Press \u23CE or click the button below to continue.`,await this.client.removeTokens(),await this.authorize()}}},xt=null,Zt=null,Vn=null,Jn=null,Hn=null;function Vs(r){return A.environment.commandMode==="no-view"?t=>async s=>{if(!xt){xt=r.personalAccessToken??await r.authorize(),Zt=r.personalAccessToken?"personal":"oauth";let i=(await r.client?.getTokens())?.idToken;r.onAuthorize&&await Promise.resolve(r.onAuthorize({token:xt,type:Zt,idToken:i}))}return t(s)}:t=>{let n=s=>{r.personalAccessToken?(xt=r.personalAccessToken,Zt="personal"):(Vn||(Vn=r.authorize()),xt=L.default.use(Vn),Zt="oauth");let i;return r.client&&(Jn||(Jn=r.client?.getTokens().then(c=>c?.idToken)),i=L.default.use(Jn)),r.onAuthorize&&(Hn||(Hn=Promise.resolve(r.onAuthorize({token:xt,type:Zt,idToken:i}))),L.default.use(Hn)),(0,ea.jsx)(t,{...s})};return n.displayName=`withAccessToken(${t.displayName||t.name})`,n}}async function Pt(r,t,n){if(process.platform!=="darwin")throw new Error("AppleScript is only supported on macOS");let{humanReadableOutput:s,language:i,timeout:c,...d}=Array.isArray(t)?n||{}:t||{},b=s!==!1?[]:["-ss"];i==="JavaScript"&&b.push("-l","JavaScript"),Array.isArray(t)&&b.push("-",...t);let p=Xn.default.spawn("osascript",b,{...d,env:{PATH:"/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin"}}),h=Fs(p,{timeout:c??1e4});p.stdin.end(r);let[{error:y,exitCode:O,signal:E,timedOut:k},_,R]=await Ns(p,{encoding:"utf8"},h),P=Jr({stripFinalNewline:!0},_),v=Jr({stripFinalNewline:!0},R);return Qs({stdout:P,stderr:v,error:y,exitCode:O,signal:E,timedOut:k,command:"osascript",options:n,parentError:new Error})}async function ra(r,t){if(process.platform!=="win32")throw new Error("PowerShell is only supported on Windows");let{timeout:n,...s}=t||{},i=["-NoLogo","-NoProfile","-NonInteractive","-Command","-"],c=Xn.default.spawn("powershell.exe",i,{...s}),d=Fs(c,{timeout:n??1e4});c.stdin.end(r);let[{error:b,exitCode:p,signal:h,timedOut:y},O,E]=await Ns(c,{encoding:"utf8"},d),k=Jr({stripFinalNewline:!0},O),_=Jr({stripFinalNewline:!0},E);return Qs({stdout:k,stderr:_,error:b,exitCode:p,signal:h,timedOut:y,command:"powershell.exe",options:t,parentError:new Error})}var Ys=re(na());function C(r){if(console.log("--- start getErrorMessage ---"),console.log("error",r),console.log("--- end getErrorMessage ---"),r instanceof Ys.HttpError)try{return JSON.parse(r.data).error.message}catch{return typeof r.data=="string"?r.data:r.data.error.message}return r instanceof Error?r.message:String(r)}var Ks=require("@raycast/api");function Ze(r){return`
    tell application "Spotify"
      if not application "Spotify" is running then
        activate

        set _maxOpenWaitTimeInSeconds to 5
        set _openCounter to 1
        repeat until application "Spotify" is running
          delay 1
          set _openCounter to _openCounter + 1
          if _openCounter > _maxOpenWaitTimeInSeconds then exit repeat
        end repeat
      end if
      ${r}
    end tell`}async function Zs(r){await(0,Ks.closeMainWindow)(),await Pt(r)}var Yr=class extends Error{constructor(t){super(t),this.name="WinNotSupportedError"}};async function de(r,t=!1,n,s){process.platform==="win32"?await tu(r,n):await ru(r,t,n,s)}async function tu(r,t){let n=`
  Add-Type -AssemblyName System.Runtime.WindowsRuntime
$asTaskGeneric = ([System.WindowsRuntimeSystemExtensions].GetMethods() | Where-Object { $_.Name -eq 'AsTask' -and $_.GetParameters().Count -eq 1 -and $_.GetParameters()[0].ParameterType.Name -eq 'IAsyncOperation\`1' })[0]

Function Await($WinRtTask, $ResultType) {
    $asTask = $asTaskGeneric.MakeGenericMethod($ResultType)
    $netTask = $asTask.Invoke($null, @($WinRtTask))
    $netTask.Wait(-1) | Out-Null
    $netTask.Result
}

Function Get-SpotifySession {
    [Windows.Media.Control.GlobalSystemMediaTransportControlsSessionManager,Windows.Media.Control,ContentType=WindowsRuntime] | Out-Null
    $mediaManager = Await ([Windows.Media.Control.GlobalSystemMediaTransportControlsSessionManager]::RequestAsync()) ([Windows.Media.Control.GlobalSystemMediaTransportControlsSessionManager])

    $sessions = $mediaManager.GetSessions()
    $spotifySession = $sessions | Where-Object {
        $_.SourceAppUserModelId -match "Spotify"
    }

    return $spotifySession
}

Function Start-Spotify {
    try {
        Start-Process "spotify:"

        $timeout = 15
        $elapsed = 0
        while ($elapsed -lt $timeout) {
            Start-Sleep -Seconds 1
            $elapsed++

            $session = Get-SpotifySession
            if ($session) {
                return $session
            }
        }

        return $null

    } catch {
        return $null
    }
}

Function Ensure-SpotifyRunning {
    $session = Get-SpotifySession

    if (-not $session) {
        $session = Start-Spotify

        if (-not $session) {
            # One more try after startup
            Start-Sleep -Seconds 2
            $session = Get-SpotifySession
        }
    }

    return $session
}
  `,s=async i=>{let c=`
${n}
$session = Ensure-SpotifyRunning
    if ($session) {
     Await ($session.${i}) ([bool])
  }
    `;await ra(c)};switch(r){case 0:await s("TryPlayAsync()");break;case 1:await s("TryPauseAsync()");break;case 2:await s("TrySkipNextAsync()");break;case 3:await s("TrySkipPreviousAsync()");break;case 4:await ra(`Start-Process "${t}"`);break;case 5:throw new Yr("Setting volume on non premium account is not supported on Windows");case 6:throw new Yr("Setting position on non premium account is not supported on Windows");default:break}}async function ru(r,t=!1,n,s){let i=async c=>{s&&s>0&&(c=`
      delay ${s}
      ${c}
    `),t?await Zs(c):await Pt(c)};switch(r){case 0:await i(Ze("play"));break;case 1:await i(Ze("pause"));break;case 2:await i(Ze("next track"));break;case 3:await i(Ze("previous track"));break;case 4:await i(Ze(`play track "${n}"`));break;case 5:await i(Ze(`set sound volume to ${n}`));break;case 6:await i(Ze(`set player position to ${n}`));break;default:break}}var aa=require("@raycast/api");var nu="7bbb789c01ff44ed842907b7a80c404f",au=["playlist-modify-private","playlist-modify-public","playlist-read-collaborative","playlist-read-private","user-follow-read","user-library-modify","user-library-read","user-modify-playback-state","user-read-currently-playing","user-read-playback-state","user-read-private","user-top-read"].join(" "),su=new aa.OAuth.PKCEClient({redirectMethod:aa.OAuth.RedirectMethod.Web,providerName:"Spotify",providerIcon:"spotify-icon.svg",description:"Connect your Spotify account",providerId:"spotify"}),sa=new Hr({client:su,clientId:nu,scope:au,authorizeUrl:"https://accounts.spotify.com/authorize/",tokenUrl:"https://accounts.spotify.com/api/token",refreshTokenUrl:"https://accounts.spotify.com/api/token",bodyEncoding:"url-encoded"});var ca={};Wn(ca,{defaults:()=>er,deleteMeAlbums:()=>Xu,deleteMeAudiobooks:()=>Mu,deleteMeEpisodes:()=>il,deleteMeFollowing:()=>$l,deleteMeShows:()=>dl,deleteMeTracks:()=>nl,deletePlaylistsByPlaylistIdFollowers:()=>yl,deletePlaylistsByPlaylistIdTracks:()=>Gu,getAlbums:()=>Su,getAlbumsById:()=>gu,getAlbumsByIdTracks:()=>wu,getArtists:()=>Ou,getArtistsById:()=>_u,getArtistsByIdAlbums:()=>ku,getArtistsByIdRelatedArtists:()=>Ru,getArtistsByIdTopTracks:()=>Eu,getAudioAnalysisById:()=>Cl,getAudioFeatures:()=>Tl,getAudioFeaturesById:()=>vl,getAudiobooks:()=>Cu,getAudiobooksById:()=>vu,getAudiobooksByIdChapters:()=>Au,getBrowseCategories:()=>Sl,getBrowseCategoriesByCategoryId:()=>wl,getBrowseCategoriesByCategoryIdPlaylists:()=>_l,getBrowseFeaturedPlaylists:()=>gl,getBrowseNewReleases:()=>El,getChapters:()=>Lu,getChaptersById:()=>Du,getEpisodes:()=>Tu,getEpisodesById:()=>ju,getMarkets:()=>Yl,getMe:()=>Fu,getMeAlbums:()=>Ku,getMeAlbumsContains:()=>el,getMeAudiobooks:()=>Iu,getMeAudiobooksContains:()=>qu,getMeEpisodes:()=>sl,getMeEpisodesContains:()=>cl,getMeFollowing:()=>Rl,getMeFollowingContains:()=>Pl,getMePlayer:()=>Ul,getMePlayerCurrentlyPlaying:()=>Dl,getMePlayerDevices:()=>ql,getMePlayerQueue:()=>Hl,getMePlayerRecentlyPlayed:()=>Jl,getMePlaylists:()=>Yu,getMeShows:()=>ul,getMeShowsContains:()=>fl,getMeTopArtists:()=>Kl,getMeTopTracks:()=>Zl,getMeTracks:()=>tl,getMeTracksContains:()=>al,getNext:()=>Xl,getPlaylistsByPlaylistId:()=>Nu,getPlaylistsByPlaylistIdFollowersContains:()=>jl,getPlaylistsByPlaylistIdImages:()=>Ol,getPlaylistsByPlaylistIdTracks:()=>Vu,getRecommendations:()=>Al,getRecommendationsAvailableGenreSeeds:()=>Il,getShows:()=>$u,getShowsById:()=>xu,getShowsByIdEpisodes:()=>Pu,getTracks:()=>zu,getTracksById:()=>Bu,getUsersByUserId:()=>pl,getUsersByUserIdPlaylists:()=>ml,postMePlayerNext:()=>zl,postMePlayerPrevious:()=>Wl,postMePlayerQueue:()=>Gl,postPlaylistsByPlaylistIdTracks:()=>Ju,postUsersByUserIdPlaylists:()=>hl,putMeAlbums:()=>Zu,putMeAudiobooks:()=>Uu,putMeEpisodes:()=>ol,putMeFollowing:()=>xl,putMePlayer:()=>Ml,putMePlayerPause:()=>Bl,putMePlayerPlay:()=>Ll,putMePlayerRepeat:()=>Nl,putMePlayerSeek:()=>Fl,putMePlayerShuffle:()=>Vl,putMePlayerVolume:()=>Ql,putMeShows:()=>ll,putMeTracks:()=>rl,putPlaylistsByPlaylistId:()=>Qu,putPlaylistsByPlaylistIdFollowers:()=>bl,putPlaylistsByPlaylistIdImages:()=>kl,putPlaylistsByPlaylistIdTracks:()=>Hu,search:()=>Wu,servers:()=>ao});var no=re(ro()),m=re(ia()),er={baseUrl:"https://api.spotify.com/v1"},l=no.runtime(er),ao={server1:"https://api.spotify.com/v1"};function gu(r,{market:t}={},n){return l.ok(l.fetchJson(`/albums/${encodeURIComponent(r)}${m.query(m.explode({market:t}))}`,{...n}))}function Su(r,{market:t}={},n){return l.ok(l.fetchJson(`/albums${m.query(m.explode({ids:r,market:t}))}`,{...n}))}function wu(r,{market:t,limit:n,offset:s}={},i){return l.ok(l.fetchJson(`/albums/${encodeURIComponent(r)}/tracks${m.query(m.explode({market:t,limit:n,offset:s}))}`,{...i}))}function _u(r,t){return l.ok(l.fetchJson(`/artists/${encodeURIComponent(r)}`,{...t}))}function Ou(r,t){return l.ok(l.fetchJson(`/artists${m.query(m.explode({ids:r}))}`,{...t}))}function ku(r,{includeGroups:t,market:n,limit:s,offset:i}={},c){return l.ok(l.fetchJson(`/artists/${encodeURIComponent(r)}/albums${m.query(m.explode({include_groups:t,market:n,limit:s,offset:i}))}`,{...c}))}function Eu(r,{market:t}={},n){return l.ok(l.fetchJson(`/artists/${encodeURIComponent(r)}/top-tracks${m.query(m.explode({market:t}))}`,{...n}))}function Ru(r,t){return l.ok(l.fetchJson(`/artists/${encodeURIComponent(r)}/related-artists`,{...t}))}function xu(r,{market:t}={},n){return l.ok(l.fetchJson(`/shows/${encodeURIComponent(r)}${m.query(m.explode({market:t}))}`,{...n}))}function $u(r,{market:t}={},n){return l.ok(l.fetchJson(`/shows${m.query(m.explode({market:t,ids:r}))}`,{...n}))}function Pu(r,{market:t,limit:n,offset:s}={},i){return l.ok(l.fetchJson(`/shows/${encodeURIComponent(r)}/episodes${m.query(m.explode({market:t,limit:n,offset:s}))}`,{...i}))}function ju(r,{market:t}={},n){return l.ok(l.fetchJson(`/episodes/${encodeURIComponent(r)}${m.query(m.explode({market:t}))}`,{...n}))}function Tu(r,{market:t}={},n){return l.ok(l.fetchJson(`/episodes${m.query(m.explode({ids:r,market:t}))}`,{...n}))}function vu(r,{market:t}={},n){return l.ok(l.fetchJson(`/audiobooks/${encodeURIComponent(r)}${m.query(m.explode({market:t}))}`,{...n}))}function Cu(r,{market:t}={},n){return l.ok(l.fetchJson(`/audiobooks${m.query(m.explode({ids:r,market:t}))}`,{...n}))}function Au(r,{market:t,limit:n,offset:s}={},i){return l.ok(l.fetchJson(`/audiobooks/${encodeURIComponent(r)}/chapters${m.query(m.explode({market:t,limit:n,offset:s}))}`,{...i}))}function Iu({limit:r,offset:t}={},n){return l.ok(l.fetchJson(`/me/audiobooks${m.query(m.explode({limit:r,offset:t}))}`,{...n}))}function Uu(r,t){return l.ok(l.fetchJson(`/me/audiobooks${m.query(m.explode({ids:r}))}`,{...t,method:"PUT"}))}function Mu(r,t){return l.ok(l.fetchJson(`/me/audiobooks${m.query(m.explode({ids:r}))}`,{...t,method:"DELETE"}))}function qu(r,t){return l.ok(l.fetchJson(`/me/audiobooks/contains${m.query(m.explode({ids:r}))}`,{...t}))}function Du(r,{market:t}={},n){return l.ok(l.fetchJson(`/chapters/${encodeURIComponent(r)}${m.query(m.explode({market:t}))}`,{...n}))}function Lu(r,{market:t}={},n){return l.ok(l.fetchJson(`/chapters${m.query(m.explode({ids:r,market:t}))}`,{...n}))}function Bu(r,{market:t}={},n){return l.ok(l.fetchJson(`/tracks/${encodeURIComponent(r)}${m.query(m.explode({market:t}))}`,{...n}))}function zu(r,{market:t}={},n){return l.ok(l.fetchJson(`/tracks${m.query(m.explode({market:t,ids:r}))}`,{...n}))}function Wu(r,t,{market:n,limit:s,offset:i,includeExternal:c}={},d){return l.ok(l.fetchJson(`/search${m.query(m.explode({q:r,market:n,limit:s,offset:i,include_external:c}),m.form({type:t}))}`,{...d}))}function Fu(r){return l.ok(l.fetchJson("/me",{...r}))}function Nu(r,{market:t,fields:n,additionalTypes:s}={},i){return l.ok(l.fetchJson(`/playlists/${encodeURIComponent(r)}${m.query(m.explode({market:t,fields:n,additional_types:s}))}`,{...i}))}function Qu(r,t,n){return l.ok(l.fetchJson(`/playlists/${encodeURIComponent(r)}`,l.json({...n,method:"PUT",body:t})))}function Vu(r,{market:t,fields:n,limit:s,offset:i,additionalTypes:c}={},d){return l.ok(l.fetchJson(`/playlists/${encodeURIComponent(r)}/tracks${m.query(m.explode({market:t,fields:n,limit:s,offset:i,additional_types:c}))}`,{...d}))}function Ju(r,t,{position:n,uris:s}={},i){return l.ok(l.fetchJson(`/playlists/${encodeURIComponent(r)}/tracks${m.query(m.explode({position:n,uris:s}))}`,l.json({...i,method:"POST",body:t})))}function Hu(r,t,{uris:n}={},s){return l.ok(l.fetchJson(`/playlists/${encodeURIComponent(r)}/tracks${m.query(m.explode({uris:n}))}`,l.json({...s,method:"PUT",body:t})))}function Gu(r,t,n){return l.ok(l.fetchJson(`/playlists/${encodeURIComponent(r)}/tracks`,l.json({...n,method:"DELETE",body:t})))}function Yu({limit:r,offset:t}={},n){return l.ok(l.fetchJson(`/me/playlists${m.query(m.explode({limit:r,offset:t}))}`,{...n}))}function Ku({limit:r,offset:t,market:n}={},s){return l.ok(l.fetchJson(`/me/albums${m.query(m.explode({limit:r,offset:t,market:n}))}`,{...s}))}function Zu(r,t,n){return l.ok(l.fetchJson(`/me/albums${m.query(m.explode({ids:r}))}`,l.json({...n,method:"PUT",body:t})))}function Xu(r,t,n){return l.ok(l.fetchJson(`/me/albums${m.query(m.explode({ids:r}))}`,l.json({...n,method:"DELETE",body:t})))}function el(r,t){return l.ok(l.fetchJson(`/me/albums/contains${m.query(m.explode({ids:r}))}`,{...t}))}function tl({market:r,limit:t,offset:n}={},s){return l.ok(l.fetchJson(`/me/tracks${m.query(m.explode({market:r,limit:t,offset:n}))}`,{...s}))}function rl(r,t,n){return l.ok(l.fetchJson(`/me/tracks${m.query(m.explode({ids:r}))}`,l.json({...n,method:"PUT",body:t})))}function nl(r,t,n){return l.ok(l.fetchJson(`/me/tracks${m.query(m.explode({ids:r}))}`,l.json({...n,method:"DELETE",body:t})))}function al(r,t){return l.ok(l.fetchJson(`/me/tracks/contains${m.query(m.explode({ids:r}))}`,{...t}))}function sl({market:r,limit:t,offset:n}={},s){return l.ok(l.fetchJson(`/me/episodes${m.query(m.explode({market:r,limit:t,offset:n}))}`,{...s}))}function ol(r,t,n){return l.ok(l.fetchJson(`/me/episodes${m.query(m.explode({ids:r}))}`,l.json({...n,method:"PUT",body:t})))}function il(r,t,n){return l.ok(l.fetchJson(`/me/episodes${m.query(m.explode({ids:r}))}`,l.json({...n,method:"DELETE",body:t})))}function cl(r,t){return l.ok(l.fetchJson(`/me/episodes/contains${m.query(m.explode({ids:r}))}`,{...t}))}function ul({limit:r,offset:t}={},n){return l.ok(l.fetchJson(`/me/shows${m.query(m.explode({limit:r,offset:t}))}`,{...n}))}function ll(r,t,n){return l.ok(l.fetchJson(`/me/shows${m.query(m.explode({ids:r}))}`,l.json({...n,method:"PUT",body:t})))}function dl(r,t,{market:n}={},s){return l.ok(l.fetchJson(`/me/shows${m.query(m.explode({ids:r,market:n}))}`,l.json({...s,method:"DELETE",body:t})))}function fl(r,t){return l.ok(l.fetchJson(`/me/shows/contains${m.query(m.explode({ids:r}))}`,{...t}))}function pl(r,t){return l.ok(l.fetchJson(`/users/${encodeURIComponent(r)}`,{...t}))}function ml(r,{limit:t,offset:n}={},s){return l.ok(l.fetchJson(`/users/${encodeURIComponent(r)}/playlists${m.query(m.explode({limit:t,offset:n}))}`,{...s}))}function hl(r,t,n){return l.ok(l.fetchJson(`/users/${encodeURIComponent(r)}/playlists`,l.json({...n,method:"POST",body:t})))}function bl(r,t,n){return l.ok(l.fetchJson(`/playlists/${encodeURIComponent(r)}/followers`,l.json({...n,method:"PUT",body:t})))}function yl(r,t){return l.ok(l.fetchJson(`/playlists/${encodeURIComponent(r)}/followers`,{...t,method:"DELETE"}))}function gl({country:r,locale:t,timestamp:n,limit:s,offset:i}={},c){return l.ok(l.fetchJson(`/browse/featured-playlists${m.query(m.explode({country:r,locale:t,timestamp:n,limit:s,offset:i}))}`,{...c}))}function Sl({country:r,locale:t,limit:n,offset:s}={},i){return l.ok(l.fetchJson(`/browse/categories${m.query(m.explode({country:r,locale:t,limit:n,offset:s}))}`,{...i}))}function wl(r,{country:t,locale:n}={},s){return l.ok(l.fetchJson(`/browse/categories/${encodeURIComponent(r)}${m.query(m.explode({country:t,locale:n}))}`,{...s}))}function _l(r,{country:t,limit:n,offset:s}={},i){return l.ok(l.fetchJson(`/browse/categories/${encodeURIComponent(r)}/playlists${m.query(m.explode({country:t,limit:n,offset:s}))}`,{...i}))}function Ol(r,t){return l.ok(l.fetchJson(`/playlists/${encodeURIComponent(r)}/images`,{...t}))}function kl(r,t,n){return l.ok(l.fetchJson(`/playlists/${encodeURIComponent(r)}/images`,{...n,method:"PUT",body:t}))}function El({country:r,limit:t,offset:n}={},s){return l.ok(l.fetchJson(`/browse/new-releases${m.query(m.explode({country:r,limit:t,offset:n}))}`,{...s}))}function Rl(r,{after:t,limit:n}={},s){return l.ok(l.fetchJson(`/me/following${m.query(m.explode({type:r,after:t,limit:n}))}`,{...s}))}function xl(r,t,n,s){return l.ok(l.fetchJson(`/me/following${m.query(m.explode({type:r,ids:t}))}`,l.json({...s,method:"PUT",body:n})))}function $l(r,t,n,s){return l.ok(l.fetchJson(`/me/following${m.query(m.explode({type:r,ids:t}))}`,l.json({...s,method:"DELETE",body:n})))}function Pl(r,t,n){return l.ok(l.fetchJson(`/me/following/contains${m.query(m.explode({type:r,ids:t}))}`,{...n}))}function jl(r,t,n){return l.ok(l.fetchJson(`/playlists/${encodeURIComponent(r)}/followers/contains${m.query(m.explode({ids:t}))}`,{...n}))}function Tl(r,t){return l.ok(l.fetchJson(`/audio-features${m.query(m.explode({ids:r}))}`,{...t}))}function vl(r,t){return l.ok(l.fetchJson(`/audio-features/${encodeURIComponent(r)}`,{...t}))}function Cl(r,t){return l.ok(l.fetchJson(`/audio-analysis/${encodeURIComponent(r)}`,{...t}))}function Al({limit:r,market:t,seedArtists:n,seedGenres:s,seedTracks:i,minAcousticness:c,maxAcousticness:d,targetAcousticness:b,minDanceability:p,maxDanceability:h,targetDanceability:y,minDurationMs:O,maxDurationMs:E,targetDurationMs:k,minEnergy:_,maxEnergy:R,targetEnergy:P,minInstrumentalness:v,maxInstrumentalness:W,targetInstrumentalness:B,minKey:$,maxKey:F,targetKey:U,minLiveness:ae,maxLiveness:ee,targetLiveness:Ae,minLoudness:Ie,maxLoudness:Y,targetLoudness:G,minMode:te,maxMode:oe,targetMode:q,minPopularity:I,maxPopularity:K,targetPopularity:Z,minSpeechiness:Ue,maxSpeechiness:et,targetSpeechiness:ce,minTempo:ue,maxTempo:ur,targetTempo:pn,minTimeSignature:mn,maxTimeSignature:$e,targetTimeSignature:ye,minValence:hn,maxValence:lr,targetValence:Pe}={},Ut){return l.ok(l.fetchJson(`/recommendations${m.query(m.explode({limit:r,market:t,seed_artists:n,seed_genres:s,seed_tracks:i,min_acousticness:c,max_acousticness:d,target_acousticness:b,min_danceability:p,max_danceability:h,target_danceability:y,min_duration_ms:O,max_duration_ms:E,target_duration_ms:k,min_energy:_,max_energy:R,target_energy:P,min_instrumentalness:v,max_instrumentalness:W,target_instrumentalness:B,min_key:$,max_key:F,target_key:U,min_liveness:ae,max_liveness:ee,target_liveness:Ae,min_loudness:Ie,max_loudness:Y,target_loudness:G,min_mode:te,max_mode:oe,target_mode:q,min_popularity:I,max_popularity:K,target_popularity:Z,min_speechiness:Ue,max_speechiness:et,target_speechiness:ce,min_tempo:ue,max_tempo:ur,target_tempo:pn,min_time_signature:mn,max_time_signature:$e,target_time_signature:ye,min_valence:hn,max_valence:lr,target_valence:Pe}))}`,{...Ut}))}function Il(r){return l.ok(l.fetchJson("/recommendations/available-genre-seeds",{...r}))}function Ul({market:r,additionalTypes:t}={},n){return l.ok(l.fetchJson(`/me/player${m.query(m.explode({market:r,additional_types:t}))}`,{...n}))}function Ml(r,t){return l.ok(l.fetchJson("/me/player",l.json({...t,method:"PUT",body:r})))}function ql(r){return l.ok(l.fetchJson("/me/player/devices",{...r}))}function Dl({market:r,additionalTypes:t}={},n){return l.ok(l.fetchJson(`/me/player/currently-playing${m.query(m.explode({market:r,additional_types:t}))}`,{...n}))}function Ll(r,{deviceId:t}={},n){return l.ok(l.fetchJson(`/me/player/play${m.query(m.explode({device_id:t}))}`,l.json({...n,method:"PUT",body:r})))}function Bl({deviceId:r}={},t){return l.ok(l.fetchJson(`/me/player/pause${m.query(m.explode({device_id:r}))}`,{...t,method:"PUT"}))}function zl({deviceId:r}={},t){return l.ok(l.fetchJson(`/me/player/next${m.query(m.explode({device_id:r}))}`,{...t,method:"POST"}))}function Wl({deviceId:r}={},t){return l.ok(l.fetchJson(`/me/player/previous${m.query(m.explode({device_id:r}))}`,{...t,method:"POST"}))}function Fl(r,{deviceId:t}={},n){return l.ok(l.fetchJson(`/me/player/seek${m.query(m.explode({position_ms:r,device_id:t}))}`,{...n,method:"PUT"}))}function Nl(r,{deviceId:t}={},n){return l.ok(l.fetchJson(`/me/player/repeat${m.query(m.explode({state:r,device_id:t}))}`,{...n,method:"PUT"}))}function Ql(r,{deviceId:t}={},n){return l.ok(l.fetchJson(`/me/player/volume${m.query(m.explode({volume_percent:r,device_id:t}))}`,{...n,method:"PUT"}))}function Vl(r,{deviceId:t}={},n){return l.ok(l.fetchJson(`/me/player/shuffle${m.query(m.explode({state:r,device_id:t}))}`,{...n,method:"PUT"}))}function Jl({limit:r,after:t,before:n}={},s){return l.ok(l.fetchJson(`/me/player/recently-played${m.query(m.explode({limit:r,after:t,before:n}))}`,{...s}))}function Hl(r){return l.ok(l.fetchJson("/me/player/queue",{...r}))}function Gl(r,{deviceId:t}={},n){return l.ok(l.fetchJson(`/me/player/queue${m.query(m.explode({uri:r,device_id:t}))}`,{...n,method:"POST"}))}function Yl(r){return l.ok(l.fetchJson("/markets",{...r}))}function Kl({timeRange:r,limit:t,offset:n}={},s){return l.ok(l.fetchJson(`/me/top/artists${m.query(m.explode({time_range:r,limit:t,offset:n}))}`,{...s}))}function Zl({timeRange:r,limit:t,offset:n}={},s){return l.ok(l.fetchJson(`/me/top/tracks${m.query(m.explode({time_range:r,limit:t,offset:n}))}`,{...s}))}function Xl(r,t){let n=r.replace(ao.server1,"");return l.ok(l.fetchJson(n,{...t}))}var qo=re(require("node:http"),1),Do=re(require("node:https"),1),pt=re(require("node:zlib"),1),_e=re(require("node:stream"),1),ir=require("node:buffer");function ed(r){if(!/^data:/i.test(r))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');r=r.replace(/\r?\n/g,"");let t=r.indexOf(",");if(t===-1||t<=4)throw new TypeError("malformed data: URI");let n=r.substring(5,t).split(";"),s="",i=!1,c=n[0]||"text/plain",d=c;for(let y=1;y<n.length;y++)n[y]==="base64"?i=!0:n[y]&&(d+=`;${n[y]}`,n[y].indexOf("charset=")===0&&(s=n[y].substring(8)));!n[0]&&!s.length&&(d+=";charset=US-ASCII",s="US-ASCII");let b=i?"base64":"ascii",p=unescape(r.substring(t+1)),h=Buffer.from(p,b);return h.type=c,h.typeFull=d,h.charset=s,h}var so=ed;var Re=re(require("node:stream"),1),Ne=require("node:util"),Se=require("node:buffer");tr();en();var Fe=class extends Error{constructor(t,n){super(t),Error.captureStackTrace(this,this.constructor),this.type=n}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var he=class extends Fe{constructor(t,n,s){super(t,n),s&&(this.code=this.errno=s.code,this.erroredSysCall=s.syscall)}};var tn=Symbol.toStringTag,pa=r=>typeof r=="object"&&typeof r.append=="function"&&typeof r.delete=="function"&&typeof r.get=="function"&&typeof r.getAll=="function"&&typeof r.has=="function"&&typeof r.set=="function"&&typeof r.sort=="function"&&r[tn]==="URLSearchParams",nr=r=>r&&typeof r=="object"&&typeof r.arrayBuffer=="function"&&typeof r.type=="string"&&typeof r.stream=="function"&&typeof r.constructor=="function"&&/^(Blob|File)$/.test(r[tn]),ho=r=>typeof r=="object"&&(r[tn]==="AbortSignal"||r[tn]==="EventTarget"),bo=(r,t)=>{let n=new URL(t).hostname,s=new URL(r).hostname;return n===s||n.endsWith(`.${s}`)},yo=(r,t)=>{let n=new URL(t).protocol,s=new URL(r).protocol;return n===s};var hd=(0,Ne.promisify)(Re.default.pipeline),be=Symbol("Body internals"),Le=class{constructor(t,{size:n=0}={}){let s=null;t===null?t=null:pa(t)?t=Se.Buffer.from(t.toString()):nr(t)||Se.Buffer.isBuffer(t)||(Ne.types.isAnyArrayBuffer(t)?t=Se.Buffer.from(t):ArrayBuffer.isView(t)?t=Se.Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof Re.default||(t instanceof lt?(t=mo(t),s=t.type.split("=")[1]):t=Se.Buffer.from(String(t))));let i=t;Se.Buffer.isBuffer(t)?i=Re.default.Readable.from(t):nr(t)&&(i=Re.default.Readable.from(t.stream())),this[be]={body:t,stream:i,boundary:s,disturbed:!1,error:null},this.size=n,t instanceof Re.default&&t.on("error",c=>{let d=c instanceof Fe?c:new he(`Invalid response body while trying to fetch ${this.url}: ${c.message}`,"system",c);this[be].error=d})}get body(){return this[be].stream}get bodyUsed(){return this[be].disturbed}async arrayBuffer(){let{buffer:t,byteOffset:n,byteLength:s}=await ba(this);return t.slice(n,n+s)}async formData(){let t=this.headers.get("content-type");if(t.startsWith("application/x-www-form-urlencoded")){let s=new lt,i=new URLSearchParams(await this.text());for(let[c,d]of i)s.append(c,d);return s}let{toFormData:n}=await Promise.resolve().then(()=>(Oo(),_o));return n(this.body,t)}async blob(){let t=this.headers&&this.headers.get("content-type")||this[be].body&&this[be].body.type||"",n=await this.arrayBuffer();return new We([n],{type:t})}async json(){let t=await this.text();return JSON.parse(t)}async text(){let t=await ba(this);return new TextDecoder().decode(t)}buffer(){return ba(this)}};Le.prototype.buffer=(0,Ne.deprecate)(Le.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(Le.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,Ne.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function ba(r){if(r[be].disturbed)throw new TypeError(`body used already for: ${r.url}`);if(r[be].disturbed=!0,r[be].error)throw r[be].error;let{body:t}=r;if(t===null)return Se.Buffer.alloc(0);if(!(t instanceof Re.default))return Se.Buffer.alloc(0);let n=[],s=0;try{for await(let i of t){if(r.size>0&&s+i.length>r.size){let c=new he(`content size at ${r.url} over limit: ${r.size}`,"max-size");throw t.destroy(c),c}s+=i.length,n.push(i)}}catch(i){throw i instanceof Fe?i:new he(`Invalid response body while trying to fetch ${r.url}: ${i.message}`,"system",i)}if(t.readableEnded===!0||t._readableState.ended===!0)try{return n.every(i=>typeof i=="string")?Se.Buffer.from(n.join("")):Se.Buffer.concat(n,s)}catch(i){throw new he(`Could not create Buffer from response body for ${r.url}: ${i.message}`,"system",i)}else throw new he(`Premature close of server response while trying to fetch ${r.url}`)}var Tt=(r,t)=>{let n,s,{body:i}=r[be];if(r.bodyUsed)throw new Error("cannot clone body after it is used");return i instanceof Re.default&&typeof i.getBoundary!="function"&&(n=new Re.PassThrough({highWaterMark:t}),s=new Re.PassThrough({highWaterMark:t}),i.pipe(n),i.pipe(s),r[be].stream=n,i=s),i},bd=(0,Ne.deprecate)(r=>r.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),sn=(r,t)=>r===null?null:typeof r=="string"?"text/plain;charset=UTF-8":pa(r)?"application/x-www-form-urlencoded;charset=UTF-8":nr(r)?r.type||null:Se.Buffer.isBuffer(r)||Ne.types.isAnyArrayBuffer(r)||ArrayBuffer.isView(r)?null:r instanceof lt?`multipart/form-data; boundary=${t[be].boundary}`:r&&typeof r.getBoundary=="function"?`multipart/form-data;boundary=${bd(r)}`:r instanceof Re.default?null:"text/plain;charset=UTF-8",ko=r=>{let{body:t}=r[be];return t===null?0:nr(t)?t.size:Se.Buffer.isBuffer(t)?t.length:t&&typeof t.getLengthSync=="function"&&t.hasKnownLength&&t.hasKnownLength()?t.getLengthSync():null},Eo=async(r,{body:t})=>{t===null?r.end():await hd(t,r)};var ya=require("node:util"),sr=re(require("node:http"),1),on=typeof sr.default.validateHeaderName=="function"?sr.default.validateHeaderName:r=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(r)){let t=new TypeError(`Header name must be a valid HTTP token [${r}]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),t}},ga=typeof sr.default.validateHeaderValue=="function"?sr.default.validateHeaderValue:(r,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t)){let n=new TypeError(`Invalid character in header content ["${r}"]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_CHAR"}),n}},we=class r extends URLSearchParams{constructor(t){let n=[];if(t instanceof r){let s=t.raw();for(let[i,c]of Object.entries(s))n.push(...c.map(d=>[i,d]))}else if(t!=null)if(typeof t=="object"&&!ya.types.isBoxedPrimitive(t)){let s=t[Symbol.iterator];if(s==null)n.push(...Object.entries(t));else{if(typeof s!="function")throw new TypeError("Header pairs must be iterable");n=[...t].map(i=>{if(typeof i!="object"||ya.types.isBoxedPrimitive(i))throw new TypeError("Each header pair must be an iterable object");return[...i]}).map(i=>{if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...i]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return n=n.length>0?n.map(([s,i])=>(on(s),ga(s,String(i)),[String(s).toLowerCase(),String(i)])):void 0,super(n),new Proxy(this,{get(s,i,c){switch(i){case"append":case"set":return(d,b)=>(on(d),ga(d,String(b)),URLSearchParams.prototype[i].call(s,String(d).toLowerCase(),String(b)));case"delete":case"has":case"getAll":return d=>(on(d),URLSearchParams.prototype[i].call(s,String(d).toLowerCase()));case"keys":return()=>(s.sort(),new Set(URLSearchParams.prototype.keys.call(s)).keys());default:return Reflect.get(s,i,c)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(t){let n=this.getAll(t);if(n.length===0)return null;let s=n.join(", ");return/^content-encoding$/i.test(t)&&(s=s.toLowerCase()),s}forEach(t,n=void 0){for(let s of this.keys())Reflect.apply(t,n,[this.get(s),s,this])}*values(){for(let t of this.keys())yield this.get(t)}*entries(){for(let t of this.keys())yield[t,this.get(t)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((t,n)=>(t[n]=this.getAll(n),t),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((t,n)=>{let s=this.getAll(n);return n==="host"?t[n]=s[0]:t[n]=s.length>1?s:s[0],t},{})}};Object.defineProperties(we.prototype,["get","entries","forEach","values"].reduce((r,t)=>(r[t]={enumerable:!0},r),{}));function Ro(r=[]){return new we(r.reduce((t,n,s,i)=>(s%2===0&&t.push(i.slice(s,s+2)),t),[]).filter(([t,n])=>{try{return on(t),ga(t,String(n)),!0}catch{return!1}}))}var yd=new Set([301,302,303,307,308]),cn=r=>yd.has(r);var Ce=Symbol("Response internals"),xe=class r extends Le{constructor(t=null,n={}){super(t,n);let s=n.status!=null?n.status:200,i=new we(n.headers);if(t!==null&&!i.has("Content-Type")){let c=sn(t,this);c&&i.append("Content-Type",c)}this[Ce]={type:"default",url:n.url,status:s,statusText:n.statusText||"",headers:i,counter:n.counter,highWaterMark:n.highWaterMark}}get type(){return this[Ce].type}get url(){return this[Ce].url||""}get status(){return this[Ce].status}get ok(){return this[Ce].status>=200&&this[Ce].status<300}get redirected(){return this[Ce].counter>0}get statusText(){return this[Ce].statusText}get headers(){return this[Ce].headers}get highWaterMark(){return this[Ce].highWaterMark}clone(){return new r(Tt(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(t,n=302){if(!cn(n))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new r(null,{headers:{location:new URL(t).toString()},status:n})}static error(){let t=new r(null,{status:0,statusText:""});return t[Ce].type="error",t}static json(t=void 0,n={}){let s=JSON.stringify(t);if(s===void 0)throw new TypeError("data is not JSON serializable");let i=new we(n&&n.headers);return i.has("content-type")||i.set("content-type","application/json"),new r(s,{...n,headers:i})}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(xe.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var Io=require("node:url"),Uo=require("node:util");var xo=r=>{if(r.search)return r.search;let t=r.href.length-1,n=r.hash||(r.href[t]==="#"?"#":"");return r.href[t-n.length]==="?"?"?":""};var Po=require("node:net");function $o(r,t=!1){return r==null||(r=new URL(r),/^(about|blob|data):$/.test(r.protocol))?"no-referrer":(r.username="",r.password="",r.hash="",t&&(r.pathname="",r.search=""),r)}var jo=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),To="strict-origin-when-cross-origin";function vo(r){if(!jo.has(r))throw new TypeError(`Invalid referrerPolicy: ${r}`);return r}function gd(r){if(/^(http|ws)s:$/.test(r.protocol))return!0;let t=r.host.replace(/(^\[)|(]$)/g,""),n=(0,Po.isIP)(t);return n===4&&/^127\./.test(t)||n===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(t)?!0:r.host==="localhost"||r.host.endsWith(".localhost")?!1:r.protocol==="file:"}function vt(r){return/^about:(blank|srcdoc)$/.test(r)||r.protocol==="data:"||/^(blob|filesystem):$/.test(r.protocol)?!0:gd(r)}function Co(r,{referrerURLCallback:t,referrerOriginCallback:n}={}){if(r.referrer==="no-referrer"||r.referrerPolicy==="")return null;let s=r.referrerPolicy;if(r.referrer==="about:client")return"no-referrer";let i=r.referrer,c=$o(i),d=$o(i,!0);c.toString().length>4096&&(c=d),t&&(c=t(c)),n&&(d=n(d));let b=new URL(r.url);switch(s){case"no-referrer":return"no-referrer";case"origin":return d;case"unsafe-url":return c;case"strict-origin":return vt(c)&&!vt(b)?"no-referrer":d.toString();case"strict-origin-when-cross-origin":return c.origin===b.origin?c:vt(c)&&!vt(b)?"no-referrer":d;case"same-origin":return c.origin===b.origin?c:"no-referrer";case"origin-when-cross-origin":return c.origin===b.origin?c:d;case"no-referrer-when-downgrade":return vt(c)&&!vt(b)?"no-referrer":c;default:throw new TypeError(`Invalid referrerPolicy: ${s}`)}}function Ao(r){let t=(r.get("referrer-policy")||"").split(/[,\s]+/),n="";for(let s of t)s&&jo.has(s)&&(n=s);return n}var ne=Symbol("Request internals"),or=r=>typeof r=="object"&&typeof r[ne]=="object",Sd=(0,Uo.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),ft=class r extends Le{constructor(t,n={}){let s;if(or(t)?s=new URL(t.url):(s=new URL(t),t={}),s.username!==""||s.password!=="")throw new TypeError(`${s} is an url with embedded credentials.`);let i=n.method||t.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(i)&&(i=i.toUpperCase()),!or(n)&&"data"in n&&Sd(),(n.body!=null||or(t)&&t.body!==null)&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let c=n.body?n.body:or(t)&&t.body!==null?Tt(t):null;super(c,{size:n.size||t.size||0});let d=new we(n.headers||t.headers||{});if(c!==null&&!d.has("Content-Type")){let h=sn(c,this);h&&d.set("Content-Type",h)}let b=or(t)?t.signal:null;if("signal"in n&&(b=n.signal),b!=null&&!ho(b))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let p=n.referrer==null?t.referrer:n.referrer;if(p==="")p="no-referrer";else if(p){let h=new URL(p);p=/^about:(\/\/)?client$/.test(h)?"client":h}else p=void 0;this[ne]={method:i,redirect:n.redirect||t.redirect||"follow",headers:d,parsedURL:s,signal:b,referrer:p},this.follow=n.follow===void 0?t.follow===void 0?20:t.follow:n.follow,this.compress=n.compress===void 0?t.compress===void 0?!0:t.compress:n.compress,this.counter=n.counter||t.counter||0,this.agent=n.agent||t.agent,this.highWaterMark=n.highWaterMark||t.highWaterMark||16384,this.insecureHTTPParser=n.insecureHTTPParser||t.insecureHTTPParser||!1,this.referrerPolicy=n.referrerPolicy||t.referrerPolicy||""}get method(){return this[ne].method}get url(){return(0,Io.format)(this[ne].parsedURL)}get headers(){return this[ne].headers}get redirect(){return this[ne].redirect}get signal(){return this[ne].signal}get referrer(){if(this[ne].referrer==="no-referrer")return"";if(this[ne].referrer==="client")return"about:client";if(this[ne].referrer)return this[ne].referrer.toString()}get referrerPolicy(){return this[ne].referrerPolicy}set referrerPolicy(t){this[ne].referrerPolicy=vo(t)}clone(){return new r(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(ft.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var Mo=r=>{let{parsedURL:t}=r[ne],n=new we(r[ne].headers);n.has("Accept")||n.set("Accept","*/*");let s=null;if(r.body===null&&/^(post|put)$/i.test(r.method)&&(s="0"),r.body!==null){let b=ko(r);typeof b=="number"&&!Number.isNaN(b)&&(s=String(b))}s&&n.set("Content-Length",s),r.referrerPolicy===""&&(r.referrerPolicy=To),r.referrer&&r.referrer!=="no-referrer"?r[ne].referrer=Co(r):r[ne].referrer="no-referrer",r[ne].referrer instanceof URL&&n.set("Referer",r.referrer),n.has("User-Agent")||n.set("User-Agent","node-fetch"),r.compress&&!n.has("Accept-Encoding")&&n.set("Accept-Encoding","gzip, deflate, br");let{agent:i}=r;typeof i=="function"&&(i=i(t));let c=xo(t),d={path:t.pathname+c,method:r.method,headers:n[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:r.insecureHTTPParser,agent:i};return{parsedURL:t,options:d}};var un=class extends Fe{constructor(t,n="aborted"){super(t,n)}};en();ma();var wd=new Set(["data:","http:","https:"]);async function ln(r,t){return new Promise((n,s)=>{let i=new ft(r,t),{parsedURL:c,options:d}=Mo(i);if(!wd.has(c.protocol))throw new TypeError(`node-fetch cannot load ${r}. URL scheme "${c.protocol.replace(/:$/,"")}" is not supported.`);if(c.protocol==="data:"){let _=so(i.url),R=new xe(_,{headers:{"Content-Type":_.typeFull}});n(R);return}let b=(c.protocol==="https:"?Do.default:qo.default).request,{signal:p}=i,h=null,y=()=>{let _=new un("The operation was aborted.");s(_),i.body&&i.body instanceof _e.default.Readable&&i.body.destroy(_),!(!h||!h.body)&&h.body.emit("error",_)};if(p&&p.aborted){y();return}let O=()=>{y(),k()},E=b(c.toString(),d);p&&p.addEventListener("abort",O);let k=()=>{E.abort(),p&&p.removeEventListener("abort",O)};E.on("error",_=>{s(new he(`request to ${i.url} failed, reason: ${_.message}`,"system",_)),k()}),_d(E,_=>{h&&h.body&&h.body.destroy(_)}),process.version<"v14"&&E.on("socket",_=>{let R;_.prependListener("end",()=>{R=_._eventsCount}),_.prependListener("close",P=>{if(h&&R<_._eventsCount&&!P){let v=new Error("Premature close");v.code="ERR_STREAM_PREMATURE_CLOSE",h.body.emit("error",v)}})}),E.on("response",_=>{E.setTimeout(0);let R=Ro(_.rawHeaders);if(cn(_.statusCode)){let $=R.get("Location"),F=null;try{F=$===null?null:new URL($,i.url)}catch{if(i.redirect!=="manual"){s(new he(`uri requested responds with an invalid redirect URL: ${$}`,"invalid-redirect")),k();return}}switch(i.redirect){case"error":s(new he(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),k();return;case"manual":break;case"follow":{if(F===null)break;if(i.counter>=i.follow){s(new he(`maximum redirect reached at: ${i.url}`,"max-redirect")),k();return}let U={headers:new we(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:Tt(i),signal:i.signal,size:i.size,referrer:i.referrer,referrerPolicy:i.referrerPolicy};if(!bo(i.url,F)||!yo(i.url,F))for(let ee of["authorization","www-authenticate","cookie","cookie2"])U.headers.delete(ee);if(_.statusCode!==303&&i.body&&t.body instanceof _e.default.Readable){s(new he("Cannot follow redirect with body being a readable stream","unsupported-redirect")),k();return}(_.statusCode===303||(_.statusCode===301||_.statusCode===302)&&i.method==="POST")&&(U.method="GET",U.body=void 0,U.headers.delete("content-length"));let ae=Ao(R);ae&&(U.referrerPolicy=ae),n(ln(new ft(F,U))),k();return}default:return s(new TypeError(`Redirect option '${i.redirect}' is not a valid value of RequestRedirect`))}}p&&_.once("end",()=>{p.removeEventListener("abort",O)});let P=(0,_e.pipeline)(_,new _e.PassThrough,$=>{$&&s($)});process.version<"v12.10"&&_.on("aborted",O);let v={url:i.url,status:_.statusCode,statusText:_.statusMessage,headers:R,size:i.size,counter:i.counter,highWaterMark:i.highWaterMark},W=R.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||W===null||_.statusCode===204||_.statusCode===304){h=new xe(P,v),n(h);return}let B={flush:pt.default.Z_SYNC_FLUSH,finishFlush:pt.default.Z_SYNC_FLUSH};if(W==="gzip"||W==="x-gzip"){P=(0,_e.pipeline)(P,pt.default.createGunzip(B),$=>{$&&s($)}),h=new xe(P,v),n(h);return}if(W==="deflate"||W==="x-deflate"){let $=(0,_e.pipeline)(_,new _e.PassThrough,F=>{F&&s(F)});$.once("data",F=>{(F[0]&15)===8?P=(0,_e.pipeline)(P,pt.default.createInflate(),U=>{U&&s(U)}):P=(0,_e.pipeline)(P,pt.default.createInflateRaw(),U=>{U&&s(U)}),h=new xe(P,v),n(h)}),$.once("end",()=>{h||(h=new xe(P,v),n(h))});return}if(W==="br"){P=(0,_e.pipeline)(P,pt.default.createBrotliDecompress(),$=>{$&&s($)}),h=new xe(P,v),n(h);return}h=new xe(P,v),n(h)}),Eo(E,i).catch(s)})}function _d(r,t){let n=ir.Buffer.from(`0\r
\r
`),s=!1,i=!1,c;r.on("response",d=>{let{headers:b}=d;s=b["transfer-encoding"]==="chunked"&&!b["content-length"]}),r.on("socket",d=>{let b=()=>{if(s&&!i){let h=new Error("Premature close");h.code="ERR_STREAM_PREMATURE_CLOSE",t(h)}},p=h=>{i=ir.Buffer.compare(h.slice(-5),n)===0,!i&&c&&(i=ir.Buffer.compare(c.slice(-3),n.slice(0,3))===0&&ir.Buffer.compare(h.slice(-2),n.slice(3))===0),c=h};d.prependListener("close",b),d.on("data",p),r.on("close",()=>{d.removeListener("close",b),d.removeListener("data",p)})})}var Sa;sa.onAuthorize=({token:r})=>{er.headers={Authorization:`Bearer ${r}`},er.fetch=ln,Sa=ca};var Lo=Vs(sa);function V(){if(!Sa)throw new Error("getSpotifyClient must be used when authenticated");return{spotifyClient:Sa}}async function Bo(){let{spotifyClient:r}=V();try{await r.putMePlayerPause()}catch(t){let n=C(t);if(n?.toLocaleLowerCase().includes("restricted device")||n?.toLocaleLowerCase().includes("premium required")){await de(1);return}throw console.log("pause.ts Error: ",n),new Error(n)}}var zo=require("@raycast/api"),Ct=!1;async function At(){return Ct=!!(await(0,zo.getApplications)()).find(n=>n.bundleId?n.bundleId==="com.spotify.client":n.name==="Spotify"),Ct}async function dn(){let{spotifyClient:r}=V();try{return await r.getMePlayerDevices()}catch(t){let n=C(t);throw console.log("getMyDevices.ts Error:",n),new Error(n)}}var It={album:"spotify:album:",artist:"spotify:artist:",playlist:"spotify:playlist:",track:"spotify:track:",show:"spotify:show:",episode:"spotify:episode:"};async function Fo({id:r,type:t,contextUri:n}={}){let{spotifyClient:s}=V(),{devices:i}=await dn(),c=await At();try{let d=i?.find(p=>p.is_active);if(!d&&c){await Wo({id:r,type:t});return}let b=d?.id??i?.[0]?.id??void 0;!t||!r?await s.putMePlayerPlay({context_uri:n},{deviceId:b}):t==="track"?n?await s.putMePlayerPlay({context_uri:n,offset:{uri:`${It.track}${r}`}},{deviceId:b}):await s.putMePlayerPlay({uris:[`${It.track}${r}`]},{deviceId:b}):t==="episode"?await s.putMePlayerPlay({uris:[`${It.episode}${r}`]},{deviceId:b}):await s.putMePlayerPlay({context_uri:`${It[t]}${r}`},{deviceId:b})}catch(d){let b=C(d);if(c&&(b?.toLocaleLowerCase().includes("no device found")||b?.toLocaleLowerCase().includes("no active device")||b?.toLocaleLowerCase().includes("restricted device")||b?.toLocaleLowerCase().includes("premium required"))){await Wo({id:r,type:t});return}throw new Error(b)}}async function Wo({id:r,type:t}){try{!t||!r?await de(0):t==="track"?await de(4,!1,`${It[t]}${r}`):await de(4,!1,`${It[t]}${r}`,1)}catch(n){let s=C(n);throw new Error(s)}}function fn(r){return new Promise(t=>setTimeout(t,r))}async function No(){let{spotifyClient:r}=V();try{await r.postMePlayerNext(),await fn(100)}catch(t){let n=C(t);if(n?.toLocaleLowerCase().includes("restricted device")||n?.toLocaleLowerCase().includes("premium required")){await de(2);return}throw console.log("skipToNext.ts Error:",n),new Error(n)}}async function Qo(){let{spotifyClient:r}=V();try{await r.postMePlayerPrevious(),await fn(100)}catch(t){let n=C(t);if(n?.toLocaleLowerCase().includes("restricted device")||n?.toLocaleLowerCase().includes("premium required")){await de(3);return}throw console.log("skipToPrevious.ts Error:",n),new Error(n)}}async function Vo({trackIds:r,artistIds:t}){let{spotifyClient:n}=V();try{return await n.getRecommendations({seedTracks:r.join(),seedArtists:t?.join()})}catch(s){let i=C(s);throw console.log("getRecommendations.ts Error:",i),new Error(i)}}async function Jo({trackIds:r=[],artistIds:t=[]}={}){let{spotifyClient:n}=V();try{let i=(await Vo({trackIds:r,artistIds:t}))?.tracks;if(i)try{await n.putMePlayerPlay({uris:i.flatMap(c=>c.uri)})}catch(c){let d=C(c);(d?.toLocaleLowerCase().includes("no active device")||d?.toLocaleLowerCase().includes("restricted device")||d?.toLocaleLowerCase().includes("premium required"))&&await de(4,!0,i[0].uri)}}catch(s){let i=C(s);throw console.log("startRadio.ts Error:",i),new Error(i)}}async function Ho({trackIds:r}){let{spotifyClient:t}=V();try{return await t.deleteMeTracks(r.join())}catch(n){let s=C(n);throw console.log("removeFromMySavedTracks.ts Error:",s),new Error(s)}}async function Go({trackIds:r}){let{spotifyClient:t}=V();try{return await t.putMeTracks(r.join())}catch(n){let s=C(n);throw console.log("addToMySavedTracks.ts Error:",s),new Error(s)}}async function Yo(r,t){let{spotifyClient:n}=V();try{return await n.putMePlayer({device_ids:[r],play:t})}catch(s){let i=C(s);throw console.log("transferMyPlayback.ts Error:",i),new Error(i)}}async function Ko(){let{spotifyClient:r}=V();try{let t=await r.getMePlayerCurrentlyPlaying({additionalTypes:"episode"});return t?{...t,item:t.item}:void 0}catch(t){let n=C(t);throw console.log("getCurrentlyPlaying.ts Error:",n),new Error(n)}}function Zo({options:r}={}){let{data:t,error:n,isLoading:s,revalidate:i}=Ee(()=>Ko(),[],{execute:r?.execute!==!1});return{currentlyPlayingData:t,currentlyPlayingError:n,currentlyPlayingIsLoading:s,currentlyPlayingRevalidate:i}}function Xo({options:r}={}){let{data:t,error:n,isLoading:s,revalidate:i}=Ee(()=>dn(),[],{execute:r?.execute!==!1});return{myDevicesData:t,myDevicesError:n,myDevicesIsLoading:s,myDevicesRevalidate:i}}var ei=require("react");var ti=Lo(({children:r})=>((0,ei.useEffect)(()=>{At()},[]),r));async function ri({limit:r=50}={}){let{spotifyClient:t}=V(),n=null,s=null;try{for(n=await t.getMePlaylists({limit:r}),s=n?.next;s;){let i=await t.getNext(s);n={...n,...i,items:[...n?.items??[],...i.items??[]]},s=i?.next}return n}catch(i){let c=C(i);throw console.log("getMyPlaylists.ts Error:",c),new Error(c)}}function ni({options:r}={}){let{data:t,error:n,isLoading:s,revalidate:i}=Ee(()=>ri(),[],{execute:r?.execute!==!1});return{myPlaylistsData:t,myPlaylistsError:n,myPlaylistsIsLoading:s,myPlaylistsRevalidate:i}}async function ai({playlistId:r,trackUris:t}){let{spotifyClient:n}=V();try{return await n.postPlaylistsByPlaylistIdTracks(r,{uris:t})}catch(s){let i=C(s);throw console.log("addToPlaylist.ts Error:",i),new Error(i)}}async function si({trackIds:r}){let{spotifyClient:t}=V();try{return await t.getMeTracksContains(r.join())}catch(n){let s=C(n);throw console.log("containsMySavedTracks.ts Error:",s),new Error(s)}}function oi({trackIds:r,options:t}){let{data:n,error:s,isLoading:i,revalidate:c}=Ee(d=>si({trackIds:d}),[r],{execute:t?.execute!==!1&&r.length>0});return{containsMySavedTracksData:n,containsMySavedTracksError:s,containsMySavedTracksIsLoading:i,containsMySavedTracksRevalidate:c}}async function ii(){let{spotifyClient:r}=V();try{return await r.getMe()}catch(t){let n=C(t);throw console.log("getMe.ts Error:",n),new Error(n)}}function ci({options:r}={}){let{data:t,error:n,isLoading:s,revalidate:i}=Ee(()=>ii(),[],{execute:r?.execute!==!1});return{meData:t,meError:n,meIsLoading:s,meRevalidate:i}}function Od(r){let t=r.toLowerCase().trim();if(r.charAt(0)==="("||r.charAt(0)==="["||t.startsWith("feat.")||t.startsWith("ft.")||t.startsWith("featuring"))return r;let n=r.indexOf("("),s=r.indexOf("["),i=r.indexOf(" - "),c=r.match(/(\s+|\()(feat\.|ft\.|featuring)(\s|\))/i),d=c?c.index:-1,b=Math.min(n!==-1?n:1/0,s!==-1?s:1/0,i!==-1?i:1/0,d!==-1?d:1/0);return b!==1/0?r.slice(0,b).trim():r}var ui=Od;function wa({name:r,artistName:t,hideArtistName:n,maxTextLength:s,cleanupTitle:i}){let c=s?Number(s):30;if(c===0||!r||!t)return"";let d=i?ui(r):r,b=n?d:`${d} \xB7 ${t}`;return b.length<=c?b:b.substring(0,c).trim()+"\u2026"}async function li(){if(await At()){let n=await Pt(`
    if application "Spotify" is not running then
        return "Not running"
    end if
  
    property currentUri : "Unknown URI"
    property playerState : "stopped"
  
    tell application "Spotify"
        try
            set currentUri to id of the current track
            set playerState to player state as string
        end try
    end tell
  
    if playerState is "playing" then
        return currentUri
    else if playerState is "paused" then
        return currentUri & "(paused)"
    else
        return "Not playing"
    end if`);if(n==="Not running")return{state:"NOT_RUNNING",uri:void 0};if(n==="Not playing")return{state:"NOT_PLAYING",uri:void 0};{let s=n.includes("(paused)")?"PAUSED":"PLAYING",i=n.replace(" (paused)","");return{state:s,uri:i}}}}function di({options:r}={}){let{data:t,error:n,isLoading:s,revalidate:i}=Ee(()=>li(),[],{execute:r?.execute!==!1});return{spotifyAppData:t,spotifyAppDataError:n,spotifyAppDataIsLoading:s,spotifyAppDataRevalidate:i}}async function _a(r){let{spotifyClient:t}=V(),n=!1;try{let s=await t.getMePlayerCurrentlyPlaying({additionalTypes:"episode"});if(s){let i=s.item;return i.duration_ms&&r*1e3>i.duration_ms?(n=!0,await t.postMePlayerNext(),"next"):(await t.putMePlayerSeek(r*1e3),"position")}return"error"}catch(s){let i=C(s);if(i?.toLocaleLowerCase().includes("restricted device")||i?.toLocaleLowerCase().includes("premium required"))return n?(await de(2),"next"):(await de(6,!1,r),"position");throw console.log("seek.ts Error:",i),new Error(i)}}var T=require("react/jsx-runtime");function kd({launchType:r}){let{hideArtistName:t,maxTextLength:n,iconType:s,cleanupTitle:i}=(0,S.getPreferenceValues)(),[c,d]=ta("currentlyPlayingUri",void 0),b=Oa.default.useRef(!1),{spotifyAppData:p,spotifyAppDataIsLoading:h,spotifyAppDataRevalidate:y}=di(),{currentlyPlayingData:O,currentlyPlayingIsLoading:E,currentlyPlayingRevalidate:k}=Zo({options:{execute:b.current}}),{myDevicesData:_}=Xo({options:{execute:r===S.LaunchType.UserInitiated}}),{myPlaylistsData:R}=ni({options:{execute:r===S.LaunchType.UserInitiated}}),{meData:P}=ci({options:{execute:r===S.LaunchType.UserInitiated}}),{containsMySavedTracksData:v,containsMySavedTracksRevalidate:W}=oi({trackIds:O?.item?.id?[O?.item?.id]:[],options:{execute:r===S.LaunchType.UserInitiated}});Oa.default.useEffect(()=>{if(p?.state==="NOT_RUNNING"||p?.state==="NOT_PLAYING"){d(void 0),b.current=!1;return}c!==p?.uri&&(d(p?.uri),b.current=!0)},[c,b,p]);let B=p?.state==="PLAYING",$=v?.[0],F=O?.currently_playing_type!=="episode",U=Date.now(),ae=7200*1e3,ee=O?.timestamp&&U-O.timestamp>ae;if(p?.state==="NOT_RUNNING")return(0,T.jsx)(Ed,{isLoading:h||E||E});if(ee&&!B||!O?.item)return(0,T.jsx)(Rd,{isLoading:h||E||E});let{item:Ae}=O,{name:Ie,external_urls:Y,uri:G}=Ae,te="",oe="",q=null;if(F){let{artists:I,id:K,album:Z}=Ae,Ue=I?.[0]?.name,et=I?.[0]?.id;te=wa({name:Ie,artistName:Ue,hideArtistName:t,maxTextLength:n,cleanupTitle:i}),oe=Z?.images.slice(-1)[0]?.url||"",q=(0,T.jsxs)(T.Fragment,{children:[$&&(0,T.jsx)(S.MenuBarExtra.Item,{icon:S.Icon.HeartDisabled,title:"Dislike",onAction:async()=>{try{await Ho({trackIds:K?[K]:[]}),await W()}catch(ce){let ue=C(ce);(0,S.showHUD)(ue)}}}),!$&&(0,T.jsx)(S.MenuBarExtra.Item,{icon:S.Icon.Heart,title:"Like",onAction:async()=>{try{await Go({trackIds:K?[K]:[]}),await W()}catch(ce){let ue=C(ce);(0,S.showHUD)(ue)}}}),(0,T.jsx)(S.MenuBarExtra.Item,{icon:S.Icon.Forward,title:"Next",onAction:async()=>{try{await No(),await k()}catch(ce){let ue=C(ce);(0,S.showHUD)(ue)}}}),(0,T.jsx)(S.MenuBarExtra.Item,{icon:S.Icon.Rewind,title:"Previous",onAction:async()=>{try{await Qo(),await k()}catch(ce){let ue=C(ce);(0,S.showHUD)(ue)}}}),(0,T.jsx)(S.MenuBarExtra.Item,{icon:S.Icon.Music,title:"Start Radio",onAction:async()=>{try{await Jo({trackIds:K?[K]:[],artistIds:et?[et]:[]})}catch(ce){let ue=C(ce);(0,S.showHUD)(ue)}}})]})}else{let{show:I}=Ae,K=I.name;te=wa({name:Ie,artistName:K,hideArtistName:t,maxTextLength:n,cleanupTitle:i}),oe=I.images.slice(-1)[0]?.url||"",q=(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(S.MenuBarExtra.Item,{icon:S.Icon.RotateClockwise,title:"Skip 15 seconds",onAction:async()=>{try{let Z=(O?.progress_ms||0)/1e3;await _a(Z+15),await k()}catch(Z){let Ue=C(Z);(0,S.showHUD)(Ue)}}}),(0,T.jsx)(S.MenuBarExtra.Item,{icon:S.Icon.RotateAntiClockwise,title:"Back 15 seconds",onAction:async()=>{try{let Z=(O?.progress_ms||0)/1e3;await _a(Z-15),await k()}catch(Z){let Ue=C(Z);(0,S.showHUD)(Ue)}}})]})}return(0,T.jsxs)(S.MenuBarExtra,{isLoading:h||E||E,icon:s==="cover-image"&&oe?{source:oe,mask:S.Image.Mask.RoundedRectangle}:{source:{dark:"menu-icon-dark.svg",light:"menu-icon-light.svg"}},title:te,tooltip:te,children:[B&&(0,T.jsx)(S.MenuBarExtra.Item,{icon:S.Icon.Pause,title:"Pause",onAction:async()=>{try{await Bo(),await y()}catch(I){let K=C(I);(0,S.showHUD)(K)}}}),!B&&(0,T.jsx)(S.MenuBarExtra.Item,{icon:S.Icon.Play,title:"Play",onAction:async()=>{try{await Fo(),await y()}catch(I){let K=C(I);(0,S.showHUD)(K)}}}),q,(0,T.jsx)(S.MenuBarExtra.Submenu,{icon:S.Icon.List,title:"Add to Playlist",children:R?.items?.filter(I=>I.owner?.id===P?.id).map(I=>I.name&&I.id&&(0,T.jsx)(S.MenuBarExtra.Item,{title:I.name,onAction:async()=>{try{await ai({playlistId:I.id,trackUris:[G]}),(0,S.showHUD)(`Added to ${I.name}`)}catch(K){let Z=C(K);(0,S.showHUD)(Z)}}},I.id))}),_?.devices&&(0,T.jsx)(S.MenuBarExtra.Submenu,{icon:S.Icon.Mobile,title:"Connect Device",children:_?.devices?.filter(I=>!I.is_restricted).map(I=>(0,T.jsx)(S.MenuBarExtra.Item,{title:I.name,icon:I.is_active?{source:S.Icon.SpeakerOn,tintColor:S.Color.Green}:{source:S.Icon.SpeakerOff,tintColor:S.Color.SecondaryText},onAction:async()=>{if(I.id)try{await Yo(I.id,!!B)}catch(K){let Z=C(K);(0,S.showHUD)(Z)}await(0,S.showHUD)(`Connected to ${I.name}`)}},I.id))}),(0,T.jsx)(S.MenuBarExtra.Section,{children:(0,T.jsx)(S.MenuBarExtra.Item,{icon:S.Icon.ArrowsExpand,title:"Now Playing",onAction:()=>(0,S.launchCommand)({name:"nowPlaying",type:S.LaunchType.UserInitiated})})}),(0,T.jsxs)(S.MenuBarExtra.Section,{children:[(0,T.jsx)(S.MenuBarExtra.Item,{title:"Copy URL",icon:S.Icon.Link,shortcut:{macOS:{modifiers:["cmd","shift"],key:"c"},Windows:{modifiers:["ctrl","shift"],key:"c"}},onAction:async()=>{await S.Clipboard.copy({html:`<a href=${Y?.spotify}>${te}</a>`,text:Y?.spotify}),(0,S.showHUD)("Copied URL to clipboard")}}),(0,T.jsx)(S.MenuBarExtra.Item,{icon:"spotify-icon.svg",title:"Open on Spotify",shortcut:S.Keyboard.Shortcut.Common.Open,onAction:()=>Ct?(0,S.open)(G||"spotify"):(0,S.open)(Y?.spotify||"https://play.spotify.com")})]}),(0,T.jsx)(S.MenuBarExtra.Section,{children:(0,T.jsx)(S.MenuBarExtra.Item,{title:"Configure Command",shortcut:{macOS:{modifiers:["cmd"],key:","},Windows:{modifiers:["ctrl"],key:","}},onAction:S.openCommandPreferences})})]})}function Ed({isLoading:r}){return(0,S.getPreferenceValues)().hideIconWhenIdle?null:(0,T.jsxs)(S.MenuBarExtra,{icon:{source:{dark:"menu-icon-dark.svg",light:"menu-icon-light.svg"}},isLoading:r,children:[(0,T.jsx)(S.MenuBarExtra.Section,{children:(0,T.jsx)(S.MenuBarExtra.Item,{title:"Spotify needs to be opened"})}),(0,T.jsx)(S.MenuBarExtra.Section,{children:(0,T.jsx)(S.MenuBarExtra.Item,{title:"Open Spotify",icon:"spotify-icon.svg",onAction:()=>Ct?(0,S.open)("spotify:"):(0,S.open)("https://play.spotify.com")})}),(0,T.jsx)(S.MenuBarExtra.Section,{children:(0,T.jsx)(S.MenuBarExtra.Item,{title:"Configure Command",shortcut:{macOS:{modifiers:["cmd"],key:","},Windows:{modifiers:["ctrl"],key:","}},onAction:S.openCommandPreferences})})]})}function Rd({title:r="Nothing is playing right now",isLoading:t}){return(0,S.getPreferenceValues)().hideIconWhenIdle?null:(0,T.jsxs)(S.MenuBarExtra,{icon:{source:{dark:"menu-icon-dark.svg",light:"menu-icon-light.svg"}},isLoading:t,children:[(0,T.jsx)(S.MenuBarExtra.Section,{children:(0,T.jsx)(S.MenuBarExtra.Item,{title:r})}),(0,T.jsxs)(S.MenuBarExtra.Section,{children:[(0,T.jsx)(S.MenuBarExtra.Item,{title:"Your library",icon:S.Icon.Book,onAction:()=>(0,S.launchCommand)({name:"yourLibrary",type:S.LaunchType.UserInitiated})}),(0,T.jsx)(S.MenuBarExtra.Item,{title:"Search",icon:S.Icon.MagnifyingGlass,onAction:()=>(0,S.launchCommand)({name:"search",type:S.LaunchType.UserInitiated})})]}),(0,T.jsx)(S.MenuBarExtra.Section,{children:(0,T.jsx)(S.MenuBarExtra.Item,{title:"Open Spotify",icon:"spotify-icon.svg",onAction:()=>Ct?(0,S.open)("spotify:"):(0,S.open)("https://play.spotify.com")})}),(0,T.jsx)(S.MenuBarExtra.Section,{children:(0,T.jsx)(S.MenuBarExtra.Item,{title:"Configure Command",shortcut:{macOS:{modifiers:["cmd"],key:","},Windows:{modifiers:["ctrl"],key:","}},onAction:S.openCommandPreferences})})]})}function fi(r){return(0,T.jsx)(ti,{children:(0,T.jsx)(kd,{...r})})}
/*! Bundled license information:

fetch-blob/index.js:
  (*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

formdata-polyfill/esm.min.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

node-domexception/index.js:
  (*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)
*/
