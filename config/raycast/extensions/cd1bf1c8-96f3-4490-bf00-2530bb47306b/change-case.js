"use strict";var M=Object.defineProperty;var Te=Object.getOwnPropertyDescriptor;var Pe=Object.getOwnPropertyNames;var Le=Object.prototype.hasOwnProperty;var be=(t,e)=>{for(var s in e)M(t,s,{get:e[s],enumerable:!0})},Re=(t,e,s,a)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Pe(e))!Le.call(t,o)&&o!==s&&M(t,o,{get:()=>e[o],enumerable:!(a=Te(e,o))||a.enumerable});return t};var Ee=t=>Re(M({},"__esModule",{value:!0}),t);var Ge={};be(Ge,{default:()=>we});module.exports=Ee(Ge);var n=require("@raycast/api"),u=require("react");var Fe=new RegExp("([\\p{Ll}\\d])(\\p{Lu})","gu"),ke=new RegExp("(\\p{Lu})([\\p{Lu}][\\p{Ll}])","gu"),_e=new RegExp("(\\d)\\p{Ll}|(\\p{L})\\d","u"),ve=/[^\p{L}\d]+/giu,X="$1\0$2",W="";function H(t){let e=t.trim();e=e.replace(Fe,X).replace(ke,X),e=e.replace(ve,"\0");let s=0,a=e.length;for(;e.charAt(s)==="\0";)s++;if(s===a)return[];for(;e.charAt(a-1)==="\0";)a--;return e.slice(s,a).split(/\0/g)}function Ue(t){let e=H(t);for(let s=0;s<e.length;s++){let a=e[s],o=_e.exec(a);if(o){let i=o.index+(o[1]??o[2]).length;e.splice(s,1,a.slice(0,i),a.slice(i))}}return e}function A(t,e){let[s,a,o]=R(t,e);return s+a.map(I(e?.locale)).join(e?.delimiter??" ")+o}function J(t,e){let[s,a,o]=R(t,e),i=I(e?.locale),p=N(e?.locale),m=e?.mergeAmbiguousCharacters?$(i,p):z(i,p);return s+a.map((d,h)=>h===0?i(d):m(d,h)).join(e?.delimiter??"")+o}function K(t,e){let[s,a,o]=R(t,e),i=I(e?.locale),p=N(e?.locale),m=e?.mergeAmbiguousCharacters?$(i,p):z(i,p);return s+a.map(m).join(e?.delimiter??"")+o}function B(t,e){return v(t,{delimiter:"_",...e})}function v(t,e){let[s,a,o]=R(t,e),i=I(e?.locale),p=N(e?.locale);return s+a.map($(i,p)).join(e?.delimiter??" ")+o}function V(t,e){let[s,a,o]=R(t,e);return s+a.map(N(e?.locale)).join(e?.delimiter??"_")+o}function G(t,e){return A(t,{delimiter:".",...e})}function U(t,e){return A(t,{delimiter:"-",...e})}function Q(t,e){return A(t,{delimiter:"/",...e})}function q(t,e){return A(t,{delimiter:"_",...e})}function Y(t,e){return v(t,{delimiter:"-",...e})}function I(t){return t===!1?e=>e.toLowerCase():e=>e.toLocaleLowerCase(t)}function N(t){return t===!1?e=>e.toUpperCase():e=>e.toLocaleUpperCase(t)}function $(t,e){return s=>`${e(s[0])}${t(s.slice(1))}`}function z(t,e){return(s,a)=>{let o=s[0];return(a>0&&o>="0"&&o<="9"?"_"+o:e(o))+t(s.slice(1))}}function R(t,e={}){let s=e.split??(e.separateNumbers?Ue:H),a=e.prefixCharacters??W,o=e.suffixCharacters??W,i=0,p=t.length;for(;i<t.length;){let m=t.charAt(i);if(!a.includes(m))break;i++}for(;p>i;){let m=p-1,d=t.charAt(m);if(!o.includes(d))break;p=m}return[t.slice(0,i),s(t.slice(i,p)),t.slice(p)]}var E=require("@raycast/api");var Ie=/(\S+)|(.)/g,Ne=new RegExp("[\\.#]\\p{Alphabetic}","u"),Oe=new RegExp("\\p{Ll}(?=[\\p{Lu}])","u"),Me=new RegExp("\\p{Alphabetic}+","gu"),$e=new RegExp("^(\\P{Alphabetic})*(?:\\p{Alphabetic}\\.){2,}(\\P{Alphabetic})*$","u"),De=new Set(["\u2014","\u2013","-","\u2015","/"]),te=new Set([".","!","?"]),je=new Set([...te,":",'"',"'","\u201D"]),D=new Set(["a","an","and","as","at","because","but","by","en","for","if","in","neither","nor","of","on","only","or","over","per","so","some","than","that","the","to","up","upon","v","versus","via","vs","when","with","without","yet"]);function ne(t,e={}){let{locale:s=void 0,sentenceCase:a=!1,sentenceTerminators:o=te,titleTerminators:i=je,smallWords:p=D,wordSeparators:m=De}=typeof e=="string"||Array.isArray(e)?{locale:e}:e,d=a?o:i,h="",f=!0;for(let L of t.matchAll(Ie)){let{1:l,2:w,index:k=0}=L;if(w){h+=w;continue}if(Ne.test(l)){let x=l.match($e);if(x){let[g,T="",S=""]=x;h+=a&&!f?l:ee(l,T.length,s),f=d.has(S.charAt(0));continue}h+=l,f=d.has(l.charAt(l.length-1))}else{let x=Array.from(l.matchAll(Me)),g=l,T=!1;for(let S=0;S<x.length;S++){let{0:y,index:r=0}=x[S],C=l.charAt(r+y.length);if(T=d.has(C),f)f=!1;else{if(a||Oe.test(y))continue;if(x.length===1){if(p.has(y)&&!(k+l.length===t.length)&&!T)continue}else if(S>0&&(!m.has(l.charAt(r-1))||p.has(y)&&m.has(C)))continue}g=ee(g,r,s)}h+=g,f=T||d.has(l.charAt(l.length-1))}}return h}function ee(t,e,s){return t.slice(0,e)+t.charAt(e).toLocaleUpperCase(s)+t.slice(e+1)}function se(t,e){let s="";for(let a of t)s+=Math.random()>.5?a.toLocaleUpperCase(e):a.toLocaleLowerCase(e);return s}function re(t,e){let s="";for(let a of t){let o=a.toLocaleLowerCase(e);s+=a===o?a.toLocaleUpperCase(e):o}return s}var ae=new RegExp("\\p{L}","u"),oe=t=>se(t),ce=t=>re(t),ie=(t,e)=>(0,E.getPreferenceValues)().preservePunctuation?t.toLowerCase():A(t,e).toLowerCase(),le=t=>{let e=t.search(ae);return e===-1?t.toLowerCase():t.slice(0,e)+t[e].toLowerCase()+t.slice(e+1)},Ce=(t,e)=>(0,E.getPreferenceValues)().preservePunctuation?t.replace(/(^|[\s\-_])(\w)/g,(a,o,i)=>o+i.toUpperCase()):v(t,e),pe=(t,e)=>U(t,e).toUpperCase(),fe=(t,e)=>{let s=(0,E.getPreferenceValues)().exceptions.split(",").map(o=>o.trim())??[],a=new Set([...s,...D]);return ne(t,{sentenceCase:e,smallWords:a})},ue=t=>fe(t,!0),de=t=>fe(t,!1),me=(t,e)=>(0,E.getPreferenceValues)().preservePunctuation?t.toUpperCase():A(t,e).toUpperCase(),he=t=>{let e=t.search(ae);return e===-1?t.toUpperCase():t.slice(0,e)+t[e].toUpperCase()+t.slice(e+1)};var xe=require("@raycast/api"),b={"Camel Case":J,"Capital Case":Ce,"Constant Case":V,"Dot Case":G,"Header Case":Y,"Lower Case":ie,"Lower First":le,"No Case":A,"Kebab Case":U,"Kebab Upper Case":pe,"Pascal Case":K,"Pascal Snake Case":B,"Path Case":Q,"Random Case":oe,"Sentence Case":ue,"Snake Case":q,"Swap Case":ce,"Title Case":de,"Upper Case":me,"Upper First":he},at=Object.keys(b),ge={"Header Case":["train","dash"],"No Case":["none"],"Kebab Case":["dash","slug","param"],"Random Case":["sponge"],"Swap Case":["reverse"],"Constant Case":["macro"]};function Xe(t,e){return e?t:t.toLowerCase()}function j(t,e){let s=(0,xe.getPreferenceValues)();return b[e](Xe(t,s.preserveCase),{prefixCharacters:s.prefixCharacters,suffixCharacters:s.suffixCharacters})}function Se(t,e){let s=[],a=[],o=t.split(`
`);for(let i of o){let p=j(i,e);s.push(p),a.push((p.length===0?"\u200B":p)+`
`)}return{rawText:s.join(`
`),markdown:a.join(`
`)}}var c=require("react/jsx-runtime"),We=4,F=class t extends Error{constructor(){super("No text"),Object.setPrototypeOf(this,t.prototype)}};async function He(){try{return await(0,n.getSelectedText)()}catch{return""}}async function Ae(t){let e=await n.Clipboard.readText(),s=await He();if(t==="clipboard"){if(e)return e;if(s)return s}else{if(s)return s;if(e)return e}throw new F}var O=new n.Cache,Je=()=>{let t=O.get("pinned");return t?JSON.parse(t):[]},Ke=()=>{let t=O.get("recent");return t?JSON.parse(t):[]},Be=t=>{O.set("pinned",JSON.stringify(t))},Ve=t=>{O.set("recent",JSON.stringify(t))};function we(t){let e=(0,n.getPreferenceValues)(),s=e.source,a=e.action,o=e.hideHUD,i=t.launchContext?.case,[p,m]=(0,u.useState)(""),[d,h]=(0,u.useState)(),[f,L]=(0,u.useState)([]),[l,w]=(0,u.useState)([]);(0,u.useEffect)(()=>{if(i){(async()=>{try{let r=await Ae(s),C=j(r,i);a==="paste"?n.Clipboard.paste(C):n.Clipboard.copy(C),o||(0,n.showHUD)(`Converted to ${i}`)}catch(r){r instanceof F?(0,n.showToast)({style:n.Toast.Style.Failure,title:"No text available",message:"Please ensure that text is either selected or copied"}):(0,n.showToast)({style:n.Toast.Style.Failure,title:"Failed to convert text"})}(0,n.popToRoot)()})();return}L(Je()),w(Ke()),(0,n.getFrontmostApplication)().then(h)},[]),(0,u.useEffect)(()=>{Be(f)},[f]),(0,u.useEffect)(()=>{Ve(l)},[l]),(0,u.useEffect)(()=>{t.fallbackText&&(0,n.clearSearchBar)()},[]);let k=async()=>{try{m(t.fallbackText||await Ae(s))}catch(r){r instanceof F&&(0,n.showToast)({style:n.Toast.Style.Failure,title:"Nothing to convert",message:"Please ensure that text is either selected or copied"})}};(0,u.useEffect)(()=>{i||k()},[]);let x=(0,u.useCallback)((r,C,_,P)=>{w([r,...l.filter(ye=>ye!==r)].slice(0,We+f.length)),o||(0,n.showHUD)(_),P==="paste"?n.Clipboard.paste(C):n.Clipboard.copy(C),e.popToRoot?(0,n.popToRoot)():(0,n.closeMainWindow)()},[l,f.length,o,e.popToRoot]),g=(0,u.useMemo)(()=>{let r=[...new Set([...f,...l,...Object.keys(b)])];return Object.fromEntries(r.filter(C=>b[C]).map(C=>[C,Se(p,C)]))},[p,f,l]);if(i)return null;let T=r=>(0,c.jsx)(n.Action,{title:"Copy to Clipboard",icon:n.Icon.Clipboard,shortcut:n.Keyboard.Shortcut.Common.Copy,onAction:()=>x(r.case,r.modified,"Copied to Clipboard","copy")}),S=r=>d?(0,c.jsx)(n.Action,{title:`Paste in ${d.name}`,icon:{fileIcon:d.path},onAction:()=>x(r.case,r.modified,`Pasted in ${d.name}`,"paste")}):null,y=r=>{let C=encodeURIComponent(`{"case":"${r.case}"}`),_=`raycast://extensions/erics118/${n.environment.extensionName}/${n.environment.commandName}?context=${C}`;return(0,c.jsx)(n.List.Item,{id:r.case,title:r.case,accessories:[{text:r.modified}],detail:(0,c.jsx)(n.List.Item.Detail,{markdown:r.detail}),keywords:ge[r.case],actions:(0,c.jsxs)(n.ActionPanel,{children:[(0,c.jsxs)(n.ActionPanel.Section,{children:[a==="paste"&&(0,c.jsx)(S,{...r}),(0,c.jsx)(T,{...r}),a==="copy"&&(0,c.jsx)(S,{...r})]}),(0,c.jsxs)(n.ActionPanel.Section,{children:[r.pinned?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.Action,{title:"Remove Pinned Case",icon:n.Icon.PinDisabled,shortcut:n.Keyboard.Shortcut.Common.Remove,onAction:()=>{L(f.filter(P=>P!==r.case))}}),(0,c.jsx)(n.Action,{title:"Clear Pinned Cases",style:n.Action.Style.Destructive,icon:{source:n.Icon.XMarkCircle},shortcut:n.Keyboard.Shortcut.Common.RemoveAll,onAction:()=>{L([])}})]}):(0,c.jsx)(n.Action,{title:"Pin Case",icon:n.Icon.Pin,shortcut:n.Keyboard.Shortcut.Common.Pin,onAction:()=>{L([r.case,...f]),r.recent&&w(l.filter(P=>P!==r.case))}}),r.recent&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.Action,{title:"Remove Recent Case",icon:n.Icon.XMarkCircle,shortcut:n.Keyboard.Shortcut.Common.Remove,onAction:()=>{w(l.filter(P=>P!==r.case))}}),(0,c.jsx)(n.Action,{title:"Clear Recent Cases",icon:{source:n.Icon.XMarkCircle,tintColor:n.Color.Red},shortcut:n.Keyboard.Shortcut.Common.RemoveAll,onAction:()=>{w([])}})]}),(0,c.jsx)(n.Action.CreateQuicklink,{title:`Create Quicklink to Convert to ${r.case}`,quicklink:{name:`Convert to ${r.case}`,link:_}})]}),(0,c.jsx)(n.ActionPanel.Section,{children:(0,c.jsx)(n.Action,{title:"Refresh Content",icon:n.Icon.RotateAntiClockwise,shortcut:n.Keyboard.Shortcut.Common.Refresh,onAction:k})})]})})};return(0,c.jsxs)(n.List,{isShowingDetail:!0,isLoading:!f||!l,selectedItemId:l[0],children:[(0,c.jsx)(n.List.Section,{title:"Pinned",children:f?.filter(r=>g[r]).map(r=>{let C=g[r];return(0,c.jsx)(y,{case:r,modified:C.rawText,detail:C.markdown,pinned:!0},r)})}),(0,c.jsx)(n.List.Section,{title:"Recent",children:l.filter(r=>!f.includes(r)).map(r=>{let C=g[r];return(0,c.jsx)(y,{case:r,modified:C.rawText,detail:C.markdown,recent:!0},r)})}),(0,c.jsx)(n.List.Section,{title:"All Cases",children:Object.keys(b).filter(r=>e[r.replace(/ +/g,"")]&&!l.includes(r)&&!f.includes(r)).map(r=>{let C=g[r];return(0,c.jsx)(y,{case:r,modified:C.rawText,detail:C.markdown},r)})})]})}
