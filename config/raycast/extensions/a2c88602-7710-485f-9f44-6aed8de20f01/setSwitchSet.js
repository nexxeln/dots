"use strict";var T=Object.create;var u=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var K=Object.getOwnPropertyNames;var I=Object.getPrototypeOf,P=Object.prototype.hasOwnProperty;var v=(t,e)=>{for(var n in e)u(t,n,{get:e[n],enumerable:!0})},w=(t,e,n,l)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of K(e))!P.call(t,o)&&o!==n&&u(t,o,{get:()=>e[o],enumerable:!(l=F(e,o))||l.enumerable});return t};var E=(t,e,n)=>(n=t!=null?T(I(t)):{},w(e||!t||!t.__esModule?u(n,"default",{value:t,enumerable:!0}):n,t)),O=t=>w(u({},"__esModule",{value:!0}),t);var $={};v($,{default:()=>C,setSwitchSet:()=>A});module.exports=O($);var c=require("react"),i=require("@raycast/api");var a=require("@raycast/api");var d=E(require("node:process"),1),h=require("node:util"),f=require("node:child_process"),M=(0,h.promisify)(f.execFile);async function y(t,{humanReadableOutput:e=!0}={}){if(d.default.platform!=="darwin")throw new Error("macOS only");let n=e?[]:["-ss"],{stdout:l}=await M("osascript",["-e",t,n]);return l.trim()}async function S(t,e){if(e||await(0,a.closeMainWindow)(),!(await(0,a.getApplications)()).some(({bundleId:o})=>o==="com.henrikruscon.Klack")){let o={style:a.Toast.Style.Failure,title:"Klack is not installed."};return await(0,a.showToast)(o),!1}try{return await y(t)}catch{await(0,a.showToast)({style:a.Toast.Style.Failure,title:"Klack v1.7.0 is required."})}}var p=require("react/jsx-runtime"),g=[{name:"CherryMX",switchSets:[{name:"Japanese Black",color:"#57534e"}]},{name:"Everglide",switchSets:[{name:"Crystal Purple",color:"#f0abfc"},{name:"Oreo",color:"#9e9894"}]},{name:"Flurples",switchSets:[{name:"Cardboard",color:"#f6ac8a"}]},{name:"Gateron",switchSets:[{name:"Milky Yellow",color:"#feedac"}]},{name:"NovelKeys",switchSets:[{name:"Cream",color:"#ffedd5"}]}];async function A(t){await S(`tell application "Klack" to switch ${t}`,!1),await(0,i.showHUD)(`Selected ${t}`)}function C(){let[t,e]=(0,c.useState)(""),[n,l]=(0,c.useState)(g),[o,m]=(0,c.useState)(""),[L,k]=(0,c.useState)(!0);(0,c.useEffect)(()=>{l(g.map(r=>({...r,switchSets:r.switchSets.filter(s=>s.name.toLowerCase().includes(t))})))},[t]),(0,c.useEffect)(()=>{(async()=>{let s=await S('tell application "Klack" to current switch',!0);s&&(m(s),k(!1))})()},[m]);async function x(r){A(r),m(r.toLowerCase())}return(0,p.jsx)(i.List,{filtering:!1,onSearchTextChange:e,navigationTitle:"Select Switch Sets",searchBarPlaceholder:"Select Switch Set",isLoading:L,children:n.map(r=>(0,p.jsx)(i.List.Section,{title:`${r.name}\u2122`,children:r.switchSets.map(s=>(0,p.jsx)(i.List.Item,{title:s.name,subtitle:s.name.toLowerCase()===o?"Current":"",icon:{source:i.Icon.PlusSquare,tintColor:s.color},actions:(0,p.jsx)(i.ActionPanel,{children:(0,p.jsx)(i.Action,{title:"Select",onAction:()=>{o&&x(s.name)}})})},s.name))},r.name))})}0&&(module.exports={setSwitchSet});
